                                                        ZXOS11NPI


                                                     XGSPON STICK
                                                    Product Guide
                                                                                Rev 2.1




Copyright© Zaram Technology, Inc 2020
Issued by Zaram Technology, Inc.
2nd Floor, 41, Seongnam-daero 925beon-gil, Bundang-gu, Seongnam-si, Gyeonggi-do, Rep. of KOREA
No part of this publication may be excerpted, reproduced, translated or utilized in any form or
by any means, electronic or mechanical, including photocopying and microfilm, without the
expressed written permission of Zaram Technology, Inc.
XGSPON-STICK

Copyright
This document is subject to copyright and may not be used reproduced, distributed or
modified in any form and by any person without the written consent of Zaram
Technology, Inc.


Trademark
Trademarks mentioned in this document are registered trademarks of their respective
companies.
This document may be modified in accordance with product enhancements and design
changes. If you need any changes or have any questions about the content of this
document, please contact the following address or homepage.


Address: 2nd Floor, 41, Seongnam-daero 925beon-gil, Bundang-gu,
          Seongnam-si, Gyeonggi-do, Republic of Korea.
Homepage: http://www.zaram.com
Tel: +82-31-779-6700
Fax: +82-31-779-6799


Notice : Please use the product safely and correctly in accordance with the contents of
the Product & Installation Guide, and disassembling this product may cause malfunction,
and static electricity, and will not be responsible for personal or property damage.




                                            2
XGSPON-STICK

History

   Version     Created Date                      Changes
   Rev 0.1     2020-10-22     Release date of the initial Document
   Rev 0.5     2020-11-03     Added MTBF, Installation guide
   Rev 0.6     2020-11-06     Safety Labels, FCC info. added
   Rev 0.7     2020-11-13     Revised the title of the document
                              Revised the power consumption information
                              Added MTBF at 25℃
                              Added the ESD caution marking and statement
                              Revised the Installtion/Removal Instruction
                              Revised the trouble shooting
    Rev 0.8    2020-12-04     Added model 3FE49207AA
    Rev 0.9    2020-12-10     Added EEPROM data,
                              Revised the Safety Labels & Regulatory
                              Compliance.
                              Revised the Hardware Features
                              Added Troubleshooting
                              Added CLI
    Rev 1.0    2020-12-21     Revised EEPROMM A2 Tx High Alaram &
                              Warnig
                              Updated Compliance Information
    Rev 1.1    2020-12-30     Revised Safety labels – FCC Notice added
                              Revised EEPROMM A2 Tx High Alaram &
                              Warnig
    Rev 1.2    2021-06-08     Change 1PPS Timing
                              Modify telnet/SSH
    Rev 1.3    2021-06-17     Add switch<->gemport drop check CLI
                              Packet filter/counter CLI
    Rev 1.4    2021-08-17     Modify CLI text

    Rev 1.5    2021-11-03     Added UKCA marking
                              Change EEPROM’s default value (address
                              64,65)
    Rev 1.6    2021-11-23     Modify RX_LOS description
    Rev 1.7    2021-12-21     Add key info CLI
                              Modify CLI text
    Rev 1.8    2022-02-18     Modify Software Features
                              Add Remote Debug by OMCI
    Rev 1.9    2022-05-09     Support Soft TX Disable
                              Add Remote Debug CLI(capture and reboot)
                              Modify CLI text
    Rev 2.0    2022-07-29     Modify RX LOS description
    Rev 2.1    2022-11-21     Modify Software Features
    Rev 2.2    2023-01-27     Change the value of the TX Power High
                              Warning threshold
                              Add test rogue-onu CLI




                                 3
XGSPON-STICK




               4
XGSPON-STICK


CONTENTS
  INTRODUCTION ................................................................................. 8
     OVERVIEW ............................................................................................................................ 8
     DOCUMENT NOTATION ........................................................................................................... 8

  PRODUCT SPECIFICATIONS ............................................................... 9
     DESCRIPTION ........................................................................................................................ 9
     HARDWARE FEATURES ........................................................................................................ 10
     SOFTWARE FEATURES ......................................................................................................... 10
     PRODUCT INFORMATION ...................................................................................................... 10
     HARDWARE INFORMATION .................................................................................................... 10

  INTERFACE CONNECTOR..................................................................12
     PIN MAP ............................................................................................................................. 12
     PIN ASSIGNMENT ................................................................................................................. 12
     PIN DESCRIPTION ................................................................................................................ 13
          VccT/VccR (Power Supply) ....................................................................................... 13
          ToD (Time of Day) ..................................................................................................... 14
          SDA/SCL (I2C Slave Interface) ................................................................................. 14
          MOD_ABS ................................................................................................................. 14
          Dying_Gasp ............................................................................................................... 15
          RX_LOS ..................................................................................................................... 15
          1PPS .......................................................................................................................... 15
          RD+/- (DIFFERENCIAL ETH TX DATA) ................................................................... 16
          TD+/- (DIFFERENCIAL ETH RX DATA) ................................................................... 16

  HARDWARE SPECIFICATION ...........................................................17
     ABSOLUTE MAXIMUM RATINGS ............................................................................................. 17
     RECOMMENDED OPERATING CONDITIONS............................................................................. 17
     TRANSMITTER OPTICAL CHARACTERISTICS ........................................................................... 18
     RECEIVER OPTICAL CHARACTERISTICS ................................................................................. 18
     TRANSMITTER ELECTRICAL INTERFACE CHARACTERISTICS .................................................... 19
     RECEIVER ELECTRICAL INTERFACE CHARACTERISTICS .......................................................... 19

  POWER CONSUMPTION ...................................................................20
     OPERATING POWER CONSUMPTION...................................................................................... 20

  EEPROM               MEMORY MAP ................................................................21
     24C08 EEPROM MAP ....................................................................................................... 21
     REGISTER : A0 ADDRESS ..................................................................................................... 22
     REGISTER : A2 ADDRESS ................................................................................................... 25
     DDM(DIGITAL DIAGNOSTICS MONITORING) INDICATION ......................................................... 27




                                                                  5
XGSPON-STICK

  MECHANICAL SPECIFICATION .........................................................28
       PRODUCT DIMENSION .......................................................................................................... 28

  QUALIFICATIONS .............................................................................29
       REGULATORY COMPLIANCE ................................................................................................. 29
       SAFETY LABELS ................................................................................................................... 29

  MTBF .................................................................................................31
       SUMMARY ........................................................................................................................... 31
       DETAIL PREDICTION............................................................................................................. 31

    INSTALLATION                                       /REMOVAL                        INSTRUCTION .............33
        ELECTROSTATICS DISCHARGE SENSITIVY (ESD) AND CLEANLINESSS ................................... 34
        INSTALLATION OF THE XGSPON STICK ............................................................................ 34
        REMOVAL OF THE XGSPON STICK................................................................................... 36

    CONFIGURATION ...........................................................................38
        SSH/TELNET CONNECTION................................................................................................ 38
        REGID SETTING ............................................................................................................... 39

    MISCELLANEOUS ............................................................................40
        SAFETY PRECAUTIONS ...................................................................................................... 40
        PRODUCT HANDLING PRECAUTIONS .................................................................................... 41

    TROUBLESHOOTING DIAGNOSTIC ................................................42
        DEBUG FROM SSH/TELNET................................................................................................ 42
            Connect to xgspon-stick by SSH/telnet from Host .................................................. 42
            Reset Strategy ......................................................................................................... 42
            Logging .................................................................................................................... 42
            counter along data path – PON counter .................................................................. 44
            counter along data path – SWITCH counter ........................................................... 44
            Method to Check PON Status ................................................................................. 46
            Method to troubleshoot SFP-Host connect ............................................................. 49

    REMOTE DEBUG BY OMCI ..............................................................51
        REMOTE DEBUG COMMAND LIST ......................................................................................... 51
        REMOTE DEBUG COMMAND DETAILS ................................................................................... 53

    CLI ..................................................................................................65
 15.1 COMMAND LIST ................................................................................................................... 65
 15.2 COMMAND SYNTAX AND FORMAT ........................................................................................ 66
 15.3. COMMEND DETAILS ............................................................................................................ 66
   15.3.1. Environment Variable Management ........................................................................ 66
   15.3.2. Data access ............................................................................................................. 69



                                                                   6
XGSPON-STICK

   15.3.3. ONU Management ................................................................................................... 71
   15.3.4. L2 Switch Management ........................................................................................... 75
   15.3.5. OMCI Management ................................................................................................. 86
   15.3.6. Laser Driver IC Management .................................................................................. 90
   15.3.7. Troubleshooting Management ................................................................................. 92
   15.3.8. test ........................................................................................................................... 95
   15.3.9. DEBUG trace ........................................................................................................... 96
   15.3.10. Packet Capture ...................................................................................................... 97

   ORDERING INFORMATION ............................................................99




                                                                   7
XGSPON-STICK




                            Introduction



        Overview

This document is intended to guide network operators and related engineers, and
focuses on the XGSPON-STICK specification.




        Document Notation

The following <Table 1> explains icons used in this guide.

Table 1. Information and Warning

 Icon            type                               Description

            Warning
                            Risk of injury to persons, loss of data, or system damage.
            Attention



            Information Important functions or features, commands, tips.
  i




                                          8
XGSPON-STICK




                               Product
                         Specifications


       Description

  ZARAM XGSPON-STICK is “Embedded XGSPON-MAC Optical Network Terminal (ONT)”
with Small Form-factor Pluggable (SFP+) packaging.

  The XGSPON-STICK provides a pluggable XGSPON interface for “Mobile backhaul
application” and “FTTx connection over existing L2 Ethernet switch”. This is also providing
symmetric/asymmetric PON-MAC protocols, which is including a sophisticated ONT
management system such as alarms and provisioning.

  The 10GPON MAC fits into existing communications equipments, providing service
providers with a smoothly upgrading the network infra to 10GPON.




                             [Figure 2-1]   XGSPON-STICK Block Diargam.




                                              9
      XGSPON-STICK


                 Hardware Features
             ◼     Simplex SC/UPC Connector, Integrated            ◼     Compliant with SFF-8431/SFF-8472/GR-
                   Diplexer Transceiver                                  468
             ◼     Compliant with ITU-T G.9807.1 XGS-PON           ◼     Single 3.3V Power Supply
                   (N1/N2)                                         ◼     Commercial and Industrial Temperature
             ◼     Support 10Gbps bi-directional traffic                 Available
                   capability.                                     ◼     Low Power consumption: Typical < 2W
             ◼     1270nm Burst-Mode Transmitter with DFB                            Worst Case (85°C) <2.1W
                   Laser                                           ◼     Designed to interoperate with 3rd party
             ◼     1577nm Continuous-Mode Receiver with                  L2/L3 switch with SFP+ type uplink port
                   APD-TIA


                 Software Features
             ◼     Compliant with ITU-T G.988 GPON OMCI            ◼     Support ToD / 1PPS (software option1)
             ◼     Support SSH/Telnet for Management               ◼     Support ”Plug-and-play” configuration via
             ◼     Support 8K MAC entries                                OLT
             ◼     Support multicast IGMP snooping                 ◼     Support Dying Gasp notification (software
             ◼     Support advanced data features including              option1)
                   VLAN-translation, modification and              ◼     Support Rogue ONU Detecting
                   transparency                                    ◼     Wire-speed with minimum frame-size
             ◼     Compliance with IEEE 1588v2 8275.1              ◼     Support Jumbo frames up to 9K
                   boundary clock, Support G.8273.2 ClassB         ◼     Support AES (DS/US Unicast, DS/US
                   performance of pair of media converters               OMCI, DS Multicast) (comment 1,2)
                                                                   ◼     Support 8TCONT / 64GEM +
                                                                         2GEM(Broadcast /Multicast)



      Software option1) ToD / 1PPS / Dying Gasp function disabled by software.
      If you want to use the ToD or 1PPS or Dying Gasp function, please further contact with related PLM
      (comment 1) Originally, US OMCI AES works the same as enable/disable of DS OMCI AES, but it operates the
      same as US Unicast AES setting due to HW limitation.
      To enable US OMCI AES, enable US Unicast AES.
      (comment 2) DS Muticast AES is not tested.


                 Product Information

                                                                                                              SERVICE
PART NUMBER      VOLTAGE        TEMPERATURE              WAVELENGTH            UPLINK INTERFACE
                                                                                                             INTERFACE
                                                     1577 DOWN STREAM,
 ZXOS11NPI           3.3V        -40 °C ~ +85°C                               10GPON port (SC/UPC)        SFP+ XFI interface
                                                       1270 UP STREAM

                 Hardware Information

       Main Chip                                                   ZARAM SoC (ZX300)

       Flash Memory                                                    Embedded 128Mbit




                                                              10
XGSPON-STICK


Memory                    Embedded 512Mbit, LPDDR SDRAM

Wavelength             1577nm Downstream, 1270nm Upstream

Uplink Interface    10 GPON Port (SC/UPC, SFP Compliant interface)

Service Interface         SFP+ Compatible SERDES Interface




                        11
XGSPON-STICK




                                          Interface
                                         Connector


      Pin Map




                          [Figure 3-1]   XGSPON-STICK PIN MAP Diagram.

      Pin Assignment

                Level /
No.   Symbol                                      Description            Note
                 Logic
 1     VeeT      NA         Module Transmitter Ground



                                          12
XGSPON-STICK

  2            ToD        LVTTL-O     Time of day                                                     1
  3             NC         LVTTL-I                                                                    4
  4            SDA        LVTTL-IO    2-Wire Serial Interface Data Line                               2
  5            SCL         LVTTL-I    2-Wire Serial Interface Clock                                   2
  6         MOD_ABS       LVTTL-O     Module Absent, Set to low                                       3
  7         Dying_Gasp     LVTTL-I    Default : not used / Dying Gasp Function(Software option)
  8          RX_LOS       LVTTL-O     Loss of Receiver Signal Indication                              3
  9            1PPS       LVTTL-O     1 Pulse Per Second
  10          VeeR            NA      Module Receiver Ground
  11          VeeR            NA      Module Receiver Ground
  12           RD-           CML-O    Receiver Inverted Data Output
  13           RD+           CML-O    Receiver Non-Inverted Data Output
  14          VeeR            NA      Module Receiver Ground
  15           VccR           NA      Module Receiver 3.3V Supply
  16           VccT           NA      Module Transmitter 3.3V Supply
  17           VeeT           NA      Module Transmitter Ground
  18           TD+           CML-I    Transmitter Non-Inverted Data Input
  19           TD-           CML-I    Transmitter Inverted Data Input
  20           VeeT           NA      Module Transmitter Ground

Note:
    1.      Output from the MCU_UART_TX port.
    2.      10K pull-up is applied inside the XGSPON stick.
    3.      It needs to be pulled up with 4.7K-10K ohms to a Host_Vcc on the host board.
    4.      NC PIN (It needs to be pulled up or down, or NC on the host board.)

Software option) ToD / 1PPS / Dying Gasp function disabled by software.
      If tthe ToD or 1PPS or Dying Gasp function is required, you need to upgrade software with the
      function enabled




            Pin Description

            VccT/VccR (Power Supply)
Refer to the table below for the Input Voltage requrirement

 Pin no.         Pin name               Specification                 Min Typical Max Units
       16             VccT                                            3.15    3.3          3.45   V


                                                     13
XGSPON-STICK

                                     Normal Operating
     15            VccR
                                         Voltage
  1,17,20          VeeT
                                             GND                          0
 10,11,14          VeeR
Note: The Operatin Voltage Range must never be exceeded.




          ToD (Time of Day)
The product processes timing information received from OLT and outputs timing information
through this pin.
Output is from the MCU_UART_TX port.



    Pin no.           Pin name                    Pin Description             Direction
                                                timing information data
          2               ToD                                                   Output
                                                   Baudrate : 38400
output data example :




          SDA/SCL (I2C Slave Interface)
The pin is for 2-wire serial interface communication.
This is for the host to check the DDM(Digital Diagnositc Monitoring) information of the XGSPON
STICK.

    Pin no.          Pin name                     Pin Description             Direction
          4               SDA                        I2C Serial Data          Bi-direction
          5               SCL                        I2C Serial CLK              input
Note: 1. 10K pull-up is applied inside the xgspon stick.
      2. I2C Slave Address : A0/A2




          MOD_ABS
The pin is for the host to confirm the XGSPON STICK presence.
It is set to low.

    Pin no.           Pin name                     Pin Description            Direction




                                                    14
XGSPON-STICK


                                        Control from MCU GPIO pin.
          6          MOD_ABS                                                       Output
                                        Set to low




           Dying_Gasp
The pin is not default but optional which can be used as Dying_Gasp function by software setting.
If input level is 0, it will report Dying_Gasp information to OLT when the function is activated.


  Pin no.         Pin name                     Pin Description                    Direction

                                 Input signal from HOST.
      7           Dying_Gasp                                                          Input
                                 low active




           RX_LOS
The pin is Loss of Signal output pin.


   Pin no.         Pin name                    Pin Description                   Direction
                                   Control from MCU GPIO pin. When
                                   LOS, Set to high.
       8            RX_LOS                                                          Output
                                   NOTE: LOS pin control is applied from
                                   V089.02 version. Versions prior to
                                   V089.02 always keep low.




           1PPS
Thie pin is output 1PPS.




                                                15
XGSPON-STICK




  Pin no.       Pin name                     Pin Description           Direction

      9            1PPS         Output 1PPS signal                       Output




          RD+/- (DIFFERENCIAL ETH TX DATA)
The pin is 10Gbps Ethernet differential TXD output interface.


  Pin no.      Pin name                      Pin Description           Direction
                                      10Gbps Ethernet interface TXD-
     12             RD-              TRANSMITTER_DATA_N to HOST          output
                                          10.3125 Gbps SERDES
                                     10Gbps Ethernet interface TXD+
     13            RD+               TRANSMITTER_DATA_P to HOST          output
                                          10.3125 Gbps SERDES




          TD+/- (DIFFERENCIAL ETH RX DATA)
The pin is 10Gbps Ethernet differential RXD input interface.


  Pin no.      Pin name                      Pin Description           Direction
                                     10Gbps Ethernet interface RXD+
     18            TD+                RECEIVER_DATA_P from HOST          input
                                         10.3125 Gbps SERDES
                                     10Gbps Ethernet interface RXD-
     19             TD-              RECEIVER_DATA_N from HOST           input
                                         10.3125 Gbps SERDES




                                               16
XGSPON-STICK




                                   Hardware
                                 Specification


       Absolute Maximum Ratings

PARAMETER                        SYMBOL            MIN           MAX             UNITS      NOTE

Storage Temperature                  TS             -40            +85            °C

Storage Humidity                     HS             5              85             %

Power Supply Voltage             VCCR/VCCT                         +3.6            V




       Recommended Operating Conditions

                                                                                   UNIT
PARAMETER                        SYMBOL      MIN          TYP             MAX               NOTE
                                                                                     S
                                     TC      -40                          +85       °C     Industrial
Operating Case Temperature
                                     TC       0                           +70       °C    Commercial
Total Tx and Rx Supply Current      ICC                                   600       mA
Supply Voltage                   VCCT/VCCR   3.15          3.3            3.45       V
Power Consumption                                                          2.0      W
Transmission Distance               TD                                     20       Km
Bit Rate for Tx 1270nm                                    9.9532                   Gbps
Bit Rate for Rx 1577nm                                    9.9532                   Gbps




                                             17
 XGSPON-STICK


            Transmitter Optical Characteristics

PARAMETER                                       MIN            TYP        MAX         UNITS      NOTE
Data Rate                                                     9.9532                     Gb/s
Center Wavelength                               1260           1270       1280           nm
Spectral Width (-20dB)                                                      1            nm
Side Mode Suppression Ratio(SMSR)                30                                      dB
Average Output Power (AOP)                      +4                         +9            dBm
Burst enable is off power (Poff)                                           -45           dBm
Extinction Ratio                                 6                                       dB       1
Transmitter Mask (PRBS 231-1@9.9532G)                     Compliant With ITU-T G9807.1            1
 Note 1. Measured with a PRBS 231-1 Test Pattern @9.9532Gbps


            Receiver Optical Characteristics

PARAMETER                                        MIN             TYP        MAX          UNITS   NOTE

Data Rate                                                       9.9532                    Gb/s

Center Wavelength                                1575            1577       1580           nm

Sensitivity (PRBS 231-1@9.9532G, ER 8.2 TX)                                 -28.5         dBm      1

Overload (PRBS 231-1@9.9532G, ER 8.2 TX)             -9                                   dBm      1

Loss of signal assert Level                       -39                                     dBm

Loss of signal De-assert Level                                                  -29       dBm

Isolation (1550~1560nm) into 1577nm RX            35                                       dB

Isolation    (1490~1500nm        GPON)   into
                                                  25                                       dB
1577nm RX
Isolation (1260~1330nm XGS-PON) into
                                                  31                                       dB
1577nm RX
Isolation   (1524~1544nm      NGPON2)    into
                                                  27
1577nm RX
Isolation   (1596~1603nm      NGPON2)    into
                                                  31
1577nm RX
Isolation (1603~1625nm PtP) into 1577nm
                                                  35
RX

Isolation (1625~1650nm) into 1577nm RX            35

Isolation (Internal 1260~1280nm Tx) into
                                                  35
1577nm RX



                                                      18
 XGSPON-STICK

Note 1. Measured with a PRBS 231-1 Test Pattern @9.9532Gbps and ER=6dB, BER ≤1.0E-3


            Transmitter Electrical Interface Characteristics

 PARAMETER                             MIN             TYP      MAX      UNITS        NOTE

 Data Rate                                            10.3125             Gbps

 Data Input Swing Differential         190                      1000     mVpp

 Date Differential Impedance            80             100      120        Ω
 Transmitter Disable Voltage -
                                         0                      0.8        V
 Low
 Transmitter Disable Voltage -
                                        2.0                     Vcc        V
 High
 Power Down Voltage Low                  0                      0.8        V

 Power Down Voltage High                2.0                     Vcc        V

 TX Fault Assert Time                    -                      50         ms

 TX Fault Reset Time                    10                       -         μs

 Burst Turn On Time                                             51.2       ns

 Burst Turn Off Time                                            51.2       ns

 TX Power Down Assert Time                                      512        ns          1

 TX Power Down De-assert Time                                   512        ns          2
   Notes:
       1.   Measured to 10% of final supply current
       2.   Measured to 90% of final supply current


            Receiver Electrical Interface Characteristics

PARAMETER                              MIN             TYP      MAX      UNITS        NOTE
Data Rate                                             10.3125              Gbps
Data Output Differential Swing         300                      850       mVpp
Loss of Signal (LOS)Assert Time                                 100         μs
Loss of Signal (LOS) De-assert
                                                                100         μs
Time
Output Differential Impedance           80             100      120         Ω




                                                      19
XGSPON-STICK




                               Power
                          Consumption


     Operating Power Consumption

  MODE      Voltage (V)   Current (A)   Power (W)               Condition
                                                    OLT Connection
  Tx/Rx
                                                    Spirent Test Center Traffic Tester
  Traffic      3.3 V       ≤0.606 A      ≤2.00 W
                                                    N6705B Power Analyzer
  Status
                                                    Room Temperature




                                        20
XGSPON-STICK




                  EEPROM
               Memory MAP

     24C08 EEPROM MAP




                        21
XGSPON-STICK


     Register : A0 Address




                             22
     XGSPON-STICK


decimal     hex       size      Name                value                     description
Serial ID (BASE ID FIELDS)
0         00h       1 Identifier            03                 SFP or SFP+
                                                               GBIC/SFP function is defined by two-wire
1         01h          1 Ext. Identifier 04
                                                               interface ID only
2         02h          1 Connector          01                 SC/UPC (Subscriber Connector)
                                                               10G Ethernet Compliance Codes
3         03h          1                    20
                                                               (10GBASE-LR)
4         04h          1 Transceiver        --                 -
          05h     ~
5~10                   6                    --                 -
          0Ah
                                                               64B/66B (Fiber Channel 16G/8G/4G or
11        0Bh          1 Encoding           06
                                                               Ethernet 10G/1G)
                                         67                    103 * 100Mbps = 10300Mbps = 10.3Gbps
12        0Ch          1 BR, Nominal
                                         63                    99 * 100Mbps = 9900Mbps = 9.9Gbps
13        0Dh          1 Rate Identifier --                    -
14        0Eh          1                    14                 20 * 1km = 20km
15        0Fh          1                    C8                 C8h(200) * 100m = 20000m = 20km
16        10h          1                    --                 OM2(500MHz*km at 850nm)
                         Length
                                                               OM1(200MHz*km at 850nm, 500MHz*km
17        11h          1 (SMF, km)          --
                                                               at 1310nm) / 10m
18        12h          1                    --                 OM4(4700MHz*km) / 10m
19        13h          1                    --                 OM3(2000MHz*km) / 10m
                                 5a-72-61-6d-20-
20~35     14h~23h 16 Vendor name 20-20-20-20-20-               Zaram (ASCII)
                                 20-20-20-20-20
36        24h          1 Transceiver        --                 -
37~39     25h~27h      3 Vendor OUI         00-0b-6f           ZARAM OUI "00-0b-6F"
                                            5a-58-4f-53-31-
40~55     28h~37h 16 Vendor PN              31-4e-50-49-20     ZXOS11NI (ASCII)
                                            -20-20-20
56~59     38h~3Bh 4 Vendor rev              31-42-20-20        1B□□ (ASCII)
60~61     3Ch~3Dh 2 Wave-length             04-f6              TX 1270nm (08h 3,4bit= 0)
62        3Eh          1 Unallocated        --
63        3Fh          1 CC_BASE            -                  Check code (0~62)


decimal     hex       size     name              value                        description
Serial ID (EXTENDED ID FIELDS)
                                                              Power Level[3], RX_LOS(PIN.8) support,
                             Option
64~65     40h~41h 2                    22-02                  TX_FAULT(PIN.2) and TX_DISABLE(PIN.3)
                             Values
                                                              not support
                                                              Upper bit rate margin (see details for rates >
66        42h          1 BR, max       --
                                                              25.0Gbps)




                                                        23
     XGSPON-STICK

                                                         Lower bit rate margin (see details for rates >
67       43h         1 BR, min        --
                                                         25.0Gbps)
                                      5a-61-72-6d-43-
                    Vendor SN         4e-32-30-33-38-    ZarmCN20380617□□ (ASCII) / Variable
68~83    44h~53h 16
                    (note1)           30-36-31-37-       ZarmCUYYWWnum□□
                                      20-20
                         Date Code    32-30-30-39-31-    200914□□ (ASCII / YYMMDDLC)
84~91    54h~5Bh 8
                         (note1)      34-20-20           LC: lot_code / Variable
                                                         Diagnostic monitoring implemented &
                         Diagnostic
92       5Ch         1                68                 Internally  calibrated,   Average   power
                         type
                                                         monitoring

                                                         Optional enhanced features
                                                         Alarm/warning flags implemented
                         Enhanced
93       5Dh         1                f0                 TX_DISABLE     control   and    monitoring
                         Options
                                                         implemented
                                                         TX_FAULT, RX_LOS monitoring implemented

                         SFF-8472                        Includes functionality described in Rev 10.2
94       5Eh         1              03
                         Compliance                      of SFF-8472.
95       5Fh         1 CC_EXT         -                  Check Code (64 ~ 94) / Variable

Vendor Specific
                   Vendor
96~103 60h~67h 8 Specific                                TBD
                   Vendor
104~113 68h~71h 10 Specific                              TBD
                   Vendor
114~115 72h~73h 2 Specific                               TBD
                   Vendor
116     74h      1 Specific                              TBD
                   Vendor
117~126 75h~7Eh 10 Specific                              TBD
                   Vendor
127     7Fh      1 Specific                              TBD
Reserved SFF-8079
128~
255      80h~FFh 128 Reserved                            SFP Rate and Application Selection
  Note 1. Vendor SN, Date Code has a different value for each product




                                                  24
XGSPON-STICK


     Register : A2 Address




                        25
 XGSPON-STICK


decimal    hex     size         name                value                Description

Alarm and Warning Thresholds (56-Byte)

0~1       00~01h    2 Temp. High alarm          5a-00 90    ℃
                                                            M02180 die temperature
2~3       02~03h    2 Temp. Low alarm           d3-00 -45 ℃ 16bit signed 2's (-128 ~ 128 [℃])

4~5       04~05h    2 Temp. High Warning        55-00 85    ℃ decimal / 256

6~7       06~07h    2 Temp. Low Warning         d8-00 -40 ℃ 19200 / 256 = 75 [℃]

8~9       08~09h    2 Voltage. High alarm       9c-40 4.0   V
                                                              VCCR
10~11     0A~0Bh    2 Voltage. Low alarm        75-30 3.0   V 16bit unsigned (0~6.55 [V])

12~13     0C~0Dh 2 Voltage. High Warning        88-b8 3.5   V decimal * 0.0001

14~15     0E~0Fh    2 Voltage. Low Warning      79-18 3.1   V 35000 * 0.0001 = 3.5 [V]

16~17     10~11h    2 Bias. High alarm          af-c8   90 mA
                                                               Bias current
18~19     12~13h    2 Bias. Low alarm           03-e8   2   mA 16bit unsigned (0~131 [mA])

20~21     14~15h    2 Bias. High Warning        9c-40 80 mA decimal * 0.002

22~23     16~17h    2 Bias. Low Warning         07-d0 4     mA 45,000 * 0.002 = 90 [mA]

24~25     18~19h    2 TX Power. High alarm      FF-FF 8.2 dBm
                                                              TX, RX Optical Power
26~27     1A~1Bh    2 TX Power. Low alarm       53-84 3.3 dBm
                                                              16bit unsigned (0~6.5535 [mW])
28~29     1C~1Dh 2 TX Power. High Warning FF-FF         8 dBm -40 ~ +9 [dBm]

30~31     1E~1Fh    2 TX Power. Low Warning 5b-92 3.7 dBm decimal * 0.0001
                                                            65,535 * 0.0001 = 6.5535 [mW]
32~33     20~21h    2 RX Power. High alarm   07-cb -7 dBm
                                                     -      //////////// dBm ///////////////////
                                                        dBm
34~35     22~23h    2 RX Power. Low alarm    00-06 32.2
                                                            10 * log(decimal * 0.0001)
36~37     24~25h    2 RX Power. High Warning 06-f2 -7.5 dBm
                                                     -      10 * log(65,535 * 0.0001) = 8.16
                                                        dBm
38~39     26~27h    2 RX Power. Low Warning 00-08 30.9      [dBm]




                                               26
  XGSPON-STICK


          DDM(Digital Diagnostics Monitoring) Indication

decimal    hex     size          name                    value                       description


Real-time Diagnostics (24-Byte)


                                                                         decimal / 256 [℃]
96~97     60~61h    2 Temperature               29 80 41.5          ℃
                                                                         / Real-Time-Variable


                                                                         decimal * 0.0001 [V]
98~99     62~63h    2 Vcc(VCCR)                 82 a4        3.34   V
                                                                         / Real-Time-Variable


                                                                         decimal * 0.002 [mA]
100~101 64~65h      2 TX Bias                   12 d0 9.632 mA
                                                                         / Real-Time-Variable


                                                                         10 * log(decimal*0.0001) [dBm]
102~103 66~67h      2 TX Power                  7e 68        5.1 dBm
                                                                         / Real-Time-Variable


                                                                         10 * log(decimal*0.0001) [dBm]
104~105 68~69h      2 Rx Power                  00 7f        -18.9 dBm
                                                                         / Real-Time-Variable


                          Optional Laser Temp                            SFF-8472, M02180: VCCTO
106~107 6A~6Bh 2                              7f a0          3.27   V
                          VCCTO                                          / Real-Time-Variable



                          Optional TEC current
108~109 6C~6Dh 2                               01 d4 0.936 mA / Real-Time-Variable
                          auxiliary



                          Optional
110       6E        1                           -             -     -    Soft TX Disable Select(6B)
                          Status/Control Bits

 Note : Real-time Diagnostics value changes every second in real time




                                                        27
XGSPON-STICK




                 Mechanical
                Specification


     Product Dimension

                                                       Measurement Unit : mm




                [Figure 7-1]   XGSPON-STICK Mechanical Diagram.




                                28
    XGSPON-STICK




                             Qualifications

              Regulatory Compliance

    Feature                   Item                                Description
                                                     EN55032, EN55035, IEC62368-1, EN50581-
CE / UKCA          Certification/mark
                                                     2012
                                                     UL 62368-1, 3ʳᵈ Ed, Issued: 2019-12-13,
NRTL(MET)          Certification/mark
                                                     CAN/CSA C22.2 No. 62368-1:19

Safety             MET, CB                           IEC60825-1,IEC 62368-1, UL 62368-1
                                                     FCC part 15 class B
                   EMI                               EN 300 386
EMC                                                  EN 55032:2015
                   EMS                               EN 55035:2017
                   ESD to the electronic Pins        MIL-STD-883J Method 3015.9
                   Laser Eye Safety                  Comply with IEC 60825-1 Class 1
Laser Eye Safety   FDA 21CFR1040.10       laser
                                                     CDRH report
                   safety
                   Reliability /DVT                  GR-468
Reliability
                   MTBF and FIT                      Telcordia SR-332 method-4
                                                     2011/65/EU(6) and 2015/863/EU(10),
RoHS&WEEE          RoHS 10
                                                     EN50581-2012


              Safety labels

         Description                                       Label text
                             Communication service equipment US listed.
NRTL_MET compliance
                             Complies with UL 62368-1, CSA C22.2 No. 62368-1




                                                29
   XGSPON-STICK




ESD warning                   Caution: This assembly contains electrostatic sensitive device.
Laser classification          Class 1 laser product
                              This laser product conforms to all applicable standards of 21 CFR
Laser product compliance
                              1040.10 at date of manufacture.
                              Tested to comply with FCC standards for home or office use.
                              This device complies with Part 15 of the FCC Rules. Operation is
                              subject to the following two conditions: (1) this device may not
                              cause
FCC standards compliance
                              harmful interference, and (2) this device must accept any
                              interference
                              received, including interference that may cause undesired
                              operation.
CDRH compliance               Complies with 21 CFR 1040.10
CE marking                    There are various CE symbols for CE compliance.
UKCA marking                  Complies with UKCA requirments


       i       i FCC Notice.
   NOTE: This equipment has been tested and found to comply with the limits for a Class
   B digital device, pursuant to part 15 of the FCC Rules. These limits are designed to
   provide reasonable protection against harmful interference in a residential installation.
   This equipment generates, uses and can radiate radio frequency energy and, if not
   installed and used in accordance with the instructions, may cause harmful interference
   to radio communications. However, there is no guarantee that interference will not
   occur in a particular installation. If this equipment does cause harmful interference to
   radio or television reception, which can be determined by turning the equipment off
   and on, the user is encouraged to try to correct the interference by one or more of the
   following measures:
   —Reorient or relocate the receiving antenna.
   —Increase the separation between the equipment and receiver.
   —Connect the equipment into an outlet on a circuit different from that to which the
     receiver is connected.
   —Consult the dealer or an experienced radio/TV technician for help.


                                               30
XGSPON-STICK




                                                        MTBF
     Summary

   This Reliability Failure Rate Prediction is based on the Bell core TR-332, 90%
   confidence level report is for the following P/Ns:

   Table 1: P/N List
       Part Number                              Description
                          XGSPON ONU Stick, 20km, Tx 1270nm 9.953G, Rx
        ZXOS11NPI         1577nm
                          9.953G,TX_Burst signal low active transmitter on, SFP+
                          form-factor, SC/UPC receptacle connector

   All P/Ns are shared the same PCBA, Mechanics, OSA design, so only the LTI-
   SFP+LR is picked out for the reliability test.

     Detail Prediction

   The following MTBF Prediction is based on Bellcore TR-332. The calculation was
   made on the transceiver 85℃ and 25℃ temperature of 90% confidence level.
   Remark: Prediction data from our suppliers or Bellcore TR-332.

                                              FAILURE_RATE          FAILURE_RATE
 PART DESCRIPTION                QTY.
                                              @ 25℃                 @ 85℃
 CAP, CERAMIC, NPO CC                   28        2.60                  12.24
 RESISTOR, FIXED FILM RNR               45        1.60                  13.56
 FERRITE BEAD/INDUCTANCE                12        4.60                  8.90
 ZX300                                  1         18.90                 156.50
 Regulator                              2         14.50                 180.90
 PLL IC                                 1         8.70                  80.50
 LASER DRIVER                           1         8.90                  92.30
 TIA                                    1         45.50                 202.40
 OSA                                    1         84.00                 294.00
                                        TOTAL     189.30                1041.3




                                         31
XGSPON-STICK

     Failure Rate =997.30F.I.T.@+85ºC With 90% Confidence Level.
     MTBF = (1 / FAILURE_RATE) x 109 HOURS = 109 /1041.30 = 960,338 Hours
     The unit of FAILURE_RATE is PER BILLION HOURS.
     MTBF = 960,338 hours @+85ºC With 90% Confidence Level.


     Failure Rate 189.30F.I.T.@+25ºC With 90% Confidence Level.
     MTBF = (1 / FAILURE_RATE) x 109 HOURS = 109 /189.30 = 5,282,620 Hours
     The unit of FAILURE_RATE is PER BILLION HOURS.
     MTBF =5,282,620hours @+25ºC With 90% Confidence Level.

     According to the prediction data above, the Activation Energy was 0.36eV
     (i.e. Ea=0.36eV)

   The Expected MTBF with various environment conditions
   (assume that the environmental factor =2.0, Grounded, Fixed and Uncontrolled)

                   Conditions                               MTBF(Hours)


       20 centigrade, 60% confidence level:                   13,610,516


       20 centigrade, 90% confidence level:                   6,214,847


       40 centigrade, 60% confidence level:                   9,888,357


       40 centigrade, 90% confidence level:                   3,987,241


       60 centigrade, 60% confidence level:                   5,045,080


       60 centigrade, 90% confidence level:                   2,034,307




                                      32
XGSPON-STICK




                                Installation
                                  /Removal
                                Instruction

        Protect the XGSPON STICK by inserting clean dust covers into them after
        the cables are removed.
        Be sure to clean the optic surfaces of the fiber cables before you plug them
        back into the optical ports of another XGSPON STICK.
       Avoid getting dust and other contaminants into the optical ports of your
        XGSPON STICK, because the optics will not work correctly when obstructed
        with dust.




        It is strongly recommended that you do not install or remove the XGSPON
        STICK with fiber-optic cables attached to it because of the potential of
        damaging the cable, the cable connector, or the optical interfaces in the
        XGSPON STICK.
        Disconnect all cables before removing or installing an XGSPON STICK.
        Removing and inserting an XGSPON STICK can shorten its useful life, so
        You should not remove and insert XGSPON STICKs any more often than is
        absolutely necessary.


        The product is an electrostatic sensitive device which requires exteme care
        when handling, storage, deployment and any other occasions.




                                       33
XGSPON-STICK



         Electrostatics Discharge Sensitivy (ESD) and
    cleanlinesss

   10.1.1 An ESD-preventive wrist or ankle strap must be worn all the time while
          handling the product.

    10.1.2 Do not touch the electrical connect which is extremely ESD senstivive.

    10.1.3 To prevent any contamination, the ducst cap should always be on the
           product unless the product is connected to the optical cable.

    10.1.4 Installers must clean and visually inspect the optical cable in advance to
            connect the cable to the product using the devices specifically designed for
            the purpose.



         Installation of the XGSPON STICK

          To install XGSPON STICKs, follow these steps:

STEP 1    Wear an ESD-preventive wrist or ankle strap and follow its instructions for
          use.

STEP 2    Close the bail before inserting the XGSPON STICK.




               [Figure 9-1]   Installing a XGSPON-STICK into port.




                                            34
XGSPON-STICK

STEP 3     Line up the XGSPON STICK with the port and slide it into the port.




               [Figure 9-2]   Completely seated XGSPON-STICK.




STEP 4     Insert optic cable to the XGSPON STICK.




                        [Figure 9-3]   Cabling a XGSPON-STICK.




         Verify that the XGSPON STICKs are completely seated and secured in their
         assigned receptacles on the line card by firmly pushing on each XGSPON
  i      STICK.
         If the XGSPON STICK is not completely seated and secured in the receptacle,
         you will hear a click as the triangular pin on the bottom of the XGSPON STICK
         snaps into the hole in the receptacle.



                                           35
XGSPON-STICK


         Removal of the XGSPON STICK

          To remove XGSPON STICKs, follow these steps:

STEP 1    Wear an ESD-preventive wrist or ankle strap and follow its instructions for
          use.

STEP 2    Remove optical cables from the XGSPON STICK.

STEP 3    Open and let down the bail on the XGSPON STICK with your index finger.
          If the bail is fastened and you cannot use your index finger to open it,
          use a small flat-blade screwdriver to open the bale clasp.




               [Figure 9-4]   Bail to unlatch.




STEP 4   Grasp the XGSPON STICK between your thumb and index finger and carefully
         remove it from the port.




               [Figure 9-5]   Pull the PON-STICK from the port.




                                             36
XGSPON-STICK


STEP 5   Place the XGSPON STICK in its original packaging, antistatic bag, or other
         protective storage environment.

STEP 6   Protect your line card by inserting clean SFP module cage covers into the
          optical module cage where the XGSPON STICK is not installed.




                                        37
XGSPON-STICK




                        Configuration

         SSH/Telnet Connection

(The function is supported from Software V083.01)
The default xgspon-stick IP address is 192.168.200.1/24.
Support only untagged packet




In order to access SSH/telnet from the host switch, IP communication must be
performed.



                                         38
XGSPON-STICK



         Step 1, set the IP of the host switch.


         Step 2, connect by SSH/telnet from host switch
           If success login, the prompt [/] # will be displayed


ID/PASSWORD:
              SSH / TELNET : admin / zrmt123!@#



          REGID Setting

(The function is supported from Software V083.01)
Registration ID can be modified through SSH/telnet as follows. Maximum 36bytes input is possible..
     [/] # setenv reg_id ZRMT67061234

     [/] # saveenv

     [/] # reset




                                                  39
XGSPON-STICK




                      Miscellaneous



        Safety Precautions

To avoid damaging the product or the human body, please observe the following Safety
precautions.
ZARAM Technology assumes no liability for customer failure to comply with
these requirements.



          Do not remove module covers or shells when operating.




          Ensure that the unit power is turned off during cleaning.


          Ensure that other power/light sources are disabled during the cleaning
          of the optical interfaces.


           Never look into the end of an optical interface while the product is
           operational. Laser radiation can be harmful to the human eye and
           injury may occur under prolonged exposure.


            Do not install any unauthorized modifications to the product.




                                          40
XGSPON-STICK


         Product handling precautions

To avoid damaging the product or malfunction the product, please observe the following
Product handling precautions.



            Be careful not to excessive static applied.
            The performance will be able decline if static with over +/- 2KV is applied.


            Do not give a shock, impact or dropping.
            If give strong shock, impact or dropping, those will be reasons about
             damage or breakdown or failure.
            Manufacture does not have responsibility if troubles are made by users.


           Do not give damages or removals to product label.
           It will be very hard to identify the product, so that A/S is not available.


           Try connecting after checking any foreign materials on Connector or Pad.
           If any foreign material is on connector, contact failure can be happened.
           Please clean the area, and then connect. Be careful not to give any
        damage.
            Do not modify or take apart or fix.
           If do above, risk will be happened such as product damage or breakdown
           or electric shock or fire.


           Disconnect all cables before removing or installing the product.




           Make sure that the power used meets the specifications of the product.


           Removing and inserting the product can shorten its useful life, so you
           should not remove and insert product any more often than
           is
        absolutely necessary.




                                            41
XGSPON-STICK




                    Troubleshootin
                      g Diagnostic


          Debug from SSH/Telnet

          Connect to xgspon-stick by SSH/telnet from Host
Refer to 11.1.1. SSH/Telnet Connection



          Reset Strategy
In the following cases, resets the XGSPON-STICK.
          ⚫ Watchdog : 60 seconds, the Stick resets the device if the software is unable to exit
              from a specific section such as a deadlock situation.
         ⚫   If online is not available for 30 seconds after PON initialization.
         ⚫   OMCI & PLOAM reset request
         ⚫   If TCONT is not allocated for 600 seconds after online
         ⚫   If ONU can not receive bw_map in 20 seconds on activation normally.
         ⚫   OMCI Tx fail(buffer full)
         ⚫   Emergency error state



          Logging
The logs are separated by module, and you can set the debugging level for each module.

                Command                                               Description
 log set dbg_level <dbg_level>
                                                     set debug level of the module.
 <module>…|(all)


                                                42
XGSPON-STICK

 log show dbg_level                                   show all current debug level of the module.
 log show mod <module> … (flash)                      show log of the specific module.
 log show line <begin #|end #|all>
                                                      show all or a few lines of the log.
 (flash)
                                                      save all current debug level to flash(env) area.
 log save dbg_level (factory)
                                                      Factory : set factory default
 log fs erase                                         Erase log flash area

Dbg_level: OFF (0), Emergency (1), Error (2), Warning (3), Info (4), and Verbose (5)
Module : OMCI, PON, ETH, SFP, PTP, SYNCE, ONU, LOGIN
Factory default level :
             Warning : OMCI , PTP, SYNCE, ONU, LOGIN
             Info       : PON, SFP


ZXOS11NPI [/] # log show mod PON                -> display per module
01:53:41.291015 [PON] IN - zapi_show_pon_state_sync
01:53:41.291015 [PON] OUT - shmem_execute
01:53:41.291015 [PON] OUT - zapi_show_pon_state_sync
ZXOS11NPI [/] # log show line end 20               -> display latest 20 log
ZXOS11NPI [/] # log show line end 20 flash           -> display latest 20 log from flash



    -   Emergency: Critical Error Conditions
              PON: {pon-cpu fail} or {failed to reset serdes} or {TX fail} or { can’t recovery omci
           buffer }
              ONU: {can’t open firmware file} or {wrong image file}
              ETHC: {ethc-cpu fail} or {increased “ready error”}


    -   Error: system operation stopped and can be recovered after reset or re-initialization.
        OMCI: { omci message parsing error } or { reboot setting with invalid parameter }
        PON: { OMCI send error } or { fail get pon data(tcont, queue, gemport, serdes etc..) }
             or { failed to notify alarm } or { onu not connected } or { omci ds size too large }
             or { omci ds no buffer } { no acquired data for omci messege } or { failed to request
             Gpio-irq for [LOS/dying-gasp] } or { pon deactivate failed to create task (omci RX,
             Heartbreat task) }
        ONU: { stopped onu/omci stack } or { not onlined within 30 seconds after init } or
              { message pool exhausted(omci message) failed to apply config(to subcpu) } or
              {occurring rogue onu } or { shared memory full failed to create task
              (wlog wr, onu TX/RX handler) }
        ETHC: { failed to add acl rule } or { can’t read mac/vlan table } or { failed to register
               ETH irq } or { failed to create task(packet RX, pon RX task, mcast_task,
               igmp_1sec_task) } or { exceeding supported vlan }
        SFP: { read/write fail } or { can’t find I2C driver } or { eeprom failed to change } or
             { occurred rogue-onu }
        SYNCE : { failed to create synce task } or { failed to init fpga }




                                                 43
XGSPON-STICK


          counter along data path – PON counter
check GEM port counter using CLI.
you should enter “onu set pon counter gem enable” CMD to get GEM statistic information.

ZXOS11NPI [/] # onu reset pon counter
GEM port idx(2000000) counter reset
GEM port idx(2000000) counter reset
GEM port idx(2000000) counter reset



ZXOS11NPI [/] # onu show pon counter

---------------------------------------------------------
 T-CONT idx : 0 | Alloc-ID : 1047(0x0417)
---------------------------------------------------------
 GEM idx | dir | GEM frames | GEM Payload bytes
---------------------------------------------------------
   003 | Rx |         1410 |   3381938
        | Tx |        1469 |   3351640
---------------------------------------------------------
   001 | Rx |         1411 |   3329176
        | Tx |        1470 |   3584136
---------------------------------------------------------
   Dir | total GEM frames | total GEM payload bytes
---------------------------------------------------------
   Rx   |        2821      |       2939
   Tx   |        2939      |    6935776
---------------------------------------------------------

---------------------------------------------------------
PON Rx FEC statistic
---------------------------------------------------------
Corrected byte          : 0
Corrected code words     : 0
Uncorrectable code words : 0
Total code words        : 3445103697
---------------------------------------------------------




Check FEC statistic
If ‘Uncorrectable_code_words’ counter increases, the optical signal is not good
Corrected_bytes : The number of bytes that were corrected by the FEC function.
Corrected_code_words : The number of code words that were corrected by the FEC.
Uncorrectable_code_words : The number of code words that were not corrected by the FEC
Total_code_words : The number of total received code words.
(code words is 8-byte size)




          counter along data path – SWITCH counter
PON-Tx, PON-Rx : PON-side switch port(connected with PON)
UNI-Tx, UNI-Rx : UNI-side switch port
CPU-Tx, CPU-Rx : Port on which the ponstick(ZXOS11NPI /ZXOS11EPI) CPU counter
Misc Packets
     Pause : pause frame
     Under : frame size is shorter than min length in pctrlb (switch show port ctrl)
     Flag : Under & FCS error



                                               44
XGSPON-STICK

     Over : frame size is longer than frame size in pctrl0 (switch show port ctrl)
     Jabber : Over & FCS error
 Error Packets
     Rx : error is occur in phy level.
     FCS : occur in phy level or duplex does not fit.
     SOB/EOB : packet is broken.
     Ready : Buffer storing packet is full


clear counter : switch show counter-clear
ZXOS11NPI [/] # switch show counter-clear

ZXOS11NPI [/] # switch show counter

==============================================================================================
                   PON-Rx       PON-Tx         UNI-Rx        UNI-Tx       CPU-Rx       CPU-Tx
----------------------------------------------------------------------------------------------
 ucast            1652427       1652252        1652252       1652427            0            0
 mcast                 11            0              0           11            0          11
 bcast                  0            0              0            0           0             0
 ---------------------------------------------------------------------------------------------
 0~64                   0            0              0            0           0             0
 65~127                11            0              0           11            0           11
 128~255                0            0              0            0            0            0
 256~511                0            0              0            0            0            0
 512~1023               0            0              0            0            0            0
 1024~            1652427       1652252        1652252       1652427            0            0
 ---------------------------------------------------------------------------------------------
 Pause                  0            0              0            0           0             0
 Under                  0            0              0            0           0             0
 Over                   0            0              0            0           0             0
 Fragment               0            -              0            -            0            -
 Jabber                 0            -              0            -           0             -
 ---------------------------------------------------------------------------------------------
 RX err                 0            -              0            -           0             -
 FCS err                0            -              0            -            0            -
 SOB err                0            -              0            -            0            -
 EOB err                0            -              0            -            0            -
 RDY err                0            -              0            -            0            -
 ---------------------------------------------------------------------------------------------
 good-byte      2478641292    2478378000     2478378000    2478641292             0          792
 bad-byte               0            -              0            -            0            -
===============================================================================================
 DROP
======================================================
               rate-limit      PORT-MAP           DROP
------------------------------------------------------
 PON                    0            0              0
 UNI                    0            0              0
======================================================


If multicast is failed, check multicast group and mac learning table below CLI.
both the mac and the group should be registered.
ZXOS11NPI [/] # switch show mac
-------------------------------------------------------------
    mac address   | port | FID | aging time | attr
-------------------+8x6543210+--------+------------+---------
 54:EE:75:90:DF:12 |0-0000010|     0 |         0 | dynamic
 74:D4:35:E4:BA:7A |0-0000010|     0 |         0 | dynamic
 00:0B:6F:50:01:17 |0-0000010|     0 |         0 | dynamic
 30:9C:23:D9:70:89 |0-0000010|     0 |         0 | dynamic
 C8:F8:6D:C4:D3:43 |0-0000001|     0 |         6 | dynamic
 3C:97:0E:1A:21:7C |0-0000010|     0 |         0 | dynamic
 00:25:90:E3:B3:FD |0-0000010|     0 |         0 | dynamic




                                                45
XGSPON-STICK

 00:07:70:C1:1E:A8 |0-0000010|     0 |         1 | dynamic
-------------------------------------------------------------
Total mac count : 8
aging period : 115500


Display the group joined to the multicast.
ZXOS11NPI [/] # mcast showg
 - igmp-state : enabled
 - query-timeout : 260
 - immediate_leave_ : 1
 ---------------------------------------------------------
 - group : 239.1.1.1 static:0,staticport:0x0,rowkey:0x0
 vid:3000 p:1 80:00:02:c0:f2:84 192.85.1.50




          Method to Check PON Status
    ⚫    Connect SSH/telnet on UNI side(user side).
         1. Default Ip for connecting SSH/telnet is 192.168.200.1
         2. Set ip of host pc to same network to XGS PON.




         3. Connect to SSH/telnet




                                               46
XGSPON-STICK




Defaule ID/PASSWORD:
            SSH / TELNET : admin / zrmt123!@#

   ⚫    PON Link check list
   1.   Check Rx optical power. Rx power should be in the proper range. (-10) ~ (-28)dBm
            A. connect a suitable attenuator. Too high rx optical power intensity can damage
                the laser diode. In this case it is impossible to use.
            B. If low rx power, remove the attenuator. And if connected, clean the optical
                cable with an optical cleaner. if the optical cable is defective, replace it.
            Check FEC statistic
            If ‘Uncorrectable_code_words’ counter increases, the optical signal is not good, so
            Check-list should be checked.
            Corrected_bytes : The number of bytes that were corrected by the FEC function.
            Corrected_cod_words : The number of code words that were corrected by the FEC
            function.
            Uncorrectable_code_words : The number of code words that were not corrected by
            the FEC function.
            Total_code_words : The number of total received code words.
            (code word is 8-byte size)
            ZXOS11NPI [/] # onu show pon counter
            ---------------------------------------------------------
            PON Rx FEC statistic
            ---------------------------------------------------------
            Corrected byte          : 0
            Corrected code words     : 0
            Uncorrectable code words : 0
            Total code words        : 3445103697
            ---------------------------------------------------------




   2.   Check DDM Info
        Access the DDM of the ONU Stick installed on the L2 Switch or wireless equipment to
        read and check the followings are all within the ranges defined in the specificartion (Tx
        Power, Rx Power, Bias Current and Temperature)
        ZXOS11NPI [/] # sfp info
        diagnostic monitoring type: 0x68
               internally calibrated
        temperature: 61.500C
        supply voltage: 3.277V
        tx bias current: 12.544mA



                                              47
XGSPON-STICK

       tx output power: 3.802mW (5.801dBm)
       rx optical power: 0.008mW (-21.079dBm) [average]

                     Item                   Normal Range            Comments

            Optic Tx Power       3.7~8dBm

                                                           Caution: Too much optic-input-power(>-
            Optic Rx Power       -28.5~-10dBm
                                                           5dBm) can damage the transceiver

            Transceiver
                                 -40C~85C
            Temperature

            Transceiver
                                 3.1~3.5V
            Voltage

            Transceiver
                                 4~80mA
            Laser-Bias-Current



  3.   Check pon serdes status
       If SERDES state is bad, perform check list.
       ZXOS11NPI [/] # onu show pon serdes
       =============================================
       ONU PON Serdes state
       ---------------------------------------------
       Serdes state | Very good(0x3e)
       =============================================
       If value is under 0x38(Bad), please replug optical line or reboot XGSPON. If that does
       not work, change the stick.


  4.   Make sure the optical cable is connected well(reconnect to ensure a good contact)
       If not connected, sync state=Hunt

       Check PON sync state
          Sync state                                Description
        Hunt(init)   Initial state searching for the PSync pattern.
        PreSync      perform Psync and SFC verification.
        Sync         normal state
        ReSync       In case of Psync or SFC verification fails, it enters the Resync state.

       ZXOS11NPI [/] # onu show pon sync
       =============================================
       ONU Downstream Synchronization state
       ---------------------------------------------
       Sync state | Sync(2)
       =============================================



  5.   Check the Rogue ONU
       If rogue_onu value is 32768, Rogue detect state, optic tx has been disabled.

       ZXOS11NPI [/] # printenv
        rogue_onu=1 (0:func off, 1:func on, 32768: onu detect rogue & auto-tx-laser-off )

       or

       admin@ZXOS11NPI [/] # getenv rogue_onu
       1




                                                  48
XGSPON-STICK

  6.   Check whether the S/N matches the one registered in the OLT
       In this case, sync state is sync and activation state rises to Serial_Number state and
       then falls back to the beginning.
       Check pon activation state
           Operation state                                 Description
                  Init          initial state, Once the downstream synchronization is attained,
                                the ONU transitions to the Profile Learning substate.
           ProfileLearning      Once an ONU receives a serial number grant, it responds with
                                a Serial_Number_ONU PLOAM message
            SerialNumber        After SerianNumber grant, set ONU-ID.
               Ranging          Assignment of equalization delay by the OLT.
                                Once the ONU receives the Ranging_Time message with
                                absolute equalization delay, it transitions to the Operation
                                state (O5)
              Operation         normal operation state.
         Intermittent_LODS in case of loss of downstream synchronization.
                                If signal is re-acquired before timer TO2 expires, the ONU
                                transitions back into the Operation state (O5).
           EmergencyStop        If an ONU receives a Disable_Serial_Number message, laser
                                off

       ZXOS11NPI [/] # onu show pon activation
       =============================================
       ONU Downstream Synchronization state
       ---------------------------------------------
       Oper. state | Operation
       =============================================


  7. Check Process, Memory status
       ZXOS11NPI [/] # sysmon cpu
       CPU usage
       cpu usage : 6.702 %

       ZXOS11NPI [/] # sysmon memory
       Memory usage
       used/total = 7761424/30318736 (25.599432 %)


  8. Check DDM info using Host Switch CLI

  9. Check Optical Power using Optical Power Meter

  ⚫    Provides CLI to search log history related to PON link.
  ZXOS11NPI [/] # log show mod PON

  For detailed usage, see 14.3.7. Troubleshooting Management.




        Method to troubleshoot SFP-Host connect
  ⚫    UNI Link check list

  1.   Check Host switch link status




                                             49
XGSPON-STICK

  2.   Check XGSPON-STICK UNI Serdes status
       ZXOS11NPI [/] # switch serdes info
       =============================================
       SWITCH ETH Serdes state
       ---------------------------------------------
       Serdes state | Very good(0x3e)
       =============================================
       If value is under 0x38(Bad), please replug optical line or reboot XGSPON. If that does
       not work, change the stick


  3.   Check port1 state.
       ZXOS11NPI [/] # switch show port status
       =================
       PORT | PORT_STATE
       -----+-----------
       0    | Enable
       1    | Enable
       8    | Enable
       =================

       If port1 is disable, check OLT configuration or reboot XGSPON.


  4.   Check OLT configuration




                                             50
XGSPON-STICK




                      Remote Debug
                           by OMCI

          Remote debug Command list

To use remote debug in OLT, the following CLI should be used.
Typ:admin> # remote-debug ont ng2:28/1/41 “command”
The contents of the command are as follows.
              "help"
              "showconfig"
              "saveconfig"
              "onu show key info"
              "counter switch [pon / uni / cpu / clear]"
              "counter gem [index 0 / clear]"
              "counter fec [pon / clear]"
              "counter type [ani / uni / discard]"
              "switch macinfo [key]"
              "switch igmpinfo"
              "lct inet [192.168.200.1]"
              "lct mask [255.255.255.0]"
              "lct mac [00:11:22:aa:bb:cc]"
              "reg_id [string]"
              "rogue_onu [mode 1 / forced_on]"
              "prbs [on / off]"
              "sysmon [mdsync / cpu / process / memory]"
              "loopback [enable / disable] [vid# | all]"
              "tod enable"
              "pps enable"
              "dying-gasp-alarm enable"
              "ssh reset_passwd"
              “ssh uni [enable/disable]”
              "cap [start | stop | show | show detail]"
              "cap filter <reset>"
              "cap f etype [0x[HEX_NUM] | 0x0800 pt [DEC_NUM]]"
              "cap f [vid [DEC_NUM] | mactype [ucast|mcast|bcast] | m __:__:__:__:__:__]"
              "reboot onu"



 command                                description
 help                                   Shows all menus used as commands
 showconfig                             Show basic information of stick such as image version,
                                        serial, registeration id, lct info, etc
 saveconfig                             Saves the config modified by remote debug to flash
                                        memory. If the config value is changed, “saveconfig”
                                        must be executed.


                                               51
XGSPON-STICK

onu show key info              Shows key exchange and encryption information
counter switch                 Shows the traffic counter of the switch inside the stick.
[pon/uni/cpu/clear]            When clearing, the counters of pon, uni, and all CPUs
                               are cleared
counter gem [index 0/clear]    It shows upstream counter by gem port of pon block
                               inside stick. First, enable and use, and disable when
                               finished. When clearing, the count of all gem ports is
                               cleared.
counter fec [pon/clear]        Show fec counter of pon port in stick.
counter type [ani / uni /      Show us/ds counter at the ONU between UNI and ANI
discard]                       interfaces
switch macinfo [key]           Unicast MAC addresses learned by the ONU, if MAC
                               bridge learning is used
switch igmpinfo                List of multiList of multicast IP addresses or related
                               MAC addresses learned by the ONU through the IGMP
                               protocol
lct [inet/mask/mac]            Modify network information to be used for SSH, etc.
                               can check it with “showconfig” and save it as
                               “saveconfig
reg_id [string]                Modify the registeration id passed to PLOAM. The string
                               count that can be transferred to the remote debug is
                               limited, so you can enter up to 18 characters, and you
                               can check it with “showconfig”. After changing, save it
                               as “saveconfig”
rogue_onu [mode 1/forced_on]   Rogue onu is forcibly generated for test purposes.
                               There are only two types of rogue_onu mode: 1
                               (rogue_onu detect enable) and 32768 (rogue onu
                               occurred).

                               Test procedure ]
                                   1. Check rogue_onu=1 in “showconfig”. (or
                                       perform “rogoue_onu mode 1”)
                                   2. Stick reboot to OLT cli. (~ reboot via-ploam)
                                   3. Perform “rogue_onu forced_on”.
                                   4. After 10sec, the stick changes to tx off state.
                                   5. Ont-enable disable/enable in OLT to adjust the
                                       optical tx off/on of the stick.
                                   6. Stick reboot to OLT cli. (~ reboot via-ploam)
                                   7. After online through ont-enable disable ->
                                       enable with OLT cli, execute “rogue_onu mode
                                       1” and “saveconfig”. (Do not “forced_on”
                                       Again)
                                   8. Stick reboot to OLT cli. (~ reboot via-ploam)
                                   9. Stick booting and working in normal state.

prbs [on/off]                  Turn on "prbs on" for the purpose of prbs test. After
                               setting, save it as “saveconfig”. If it is set to “prbs on”,
                               the prbs mode is enabled at the next booting, and the
                               prbs mode is automatically disabled at the next boot
                               after the test is finished and normal booting is
                               performed

                               Test procedure ]


                                      52
XGSPON-STICK

                                       1. Check prbs_mode=32769 in “showconfig”
                                           after “prbs on”, “saveconfig”.
                                       2. Stick reboot to OLT cli. (~ reboot via-ploam)
                                       3. After rebooting, the stick operates in prbs
                                           mode.
                                       4. After completion of test, stick plug off / on
                                           manually.
                                       5. Stick booting and working in normal state
 sysmon                            Shows the system monitoring information.
 [mdsync/cpu/process/memory]       mdsync : shows the current mib data sync counter.
                                   cpu : shows the current cpu usage as a percentage.
                                   process : shows the current status of each task.
                                   memory : shows the current memory usage as a
                                   percentage.
 loopback [enable / disable]       loopback test at ani port. Specific vlan or all vlan.
 [vid#/all]
 tod enable                        Default : disable.
                                   ToD pin is SFP PIN(2).
                                   After stick is rebooting, then ToD will Disable.(Not
                                   support disable command)
 pps enable                        Default : disable.
                                   PPS pin is SFP PIN(9).
                                   After stick is rebooting, then PPS will Disable. (Not
                                   support disable command)
 dying-gasp-alarm enable           Default : disable.
                                   Dying-gasp detecting pin is SFP PIN(7).
                                   After stick is rebooting, then Dying-gasp detecting will
                                   Disable. (Not support disable command)
 ssh reset_passwd                  Set ssh password to default.
 ssh uni [enable/disable]          Default : disable.
                                   After stick is rebooting, then ssh uni will Disable.
                                   Used for connecting to ssh from Uni side.
 cap [start | stop | show | show   Captures incoming and outgoing packets to the CPU.
 detail]                           cap start: start packet capture
                                   cap stop: stop packet capture
                                   cap show: show captured packet
                                   cap show detail: show detail captured packet
 cap filter <reset>                display filter info.
                                   cap filter: show capture filter info
                                   cap filter reset: reset capture filter
 cap f etype [0x[HEX_NUM] |        set capture packet’s filter info (etype:ether type, pt: ip
 0x0800 pt [DEC_NUM]]              protocol number)
 cap f [vid [DEC_NUM] |            set capture packet’s filter info(vid, mac type, mac
 mactype [ucast|mcast|bcast] |     address)
 m __:__:__:__:__:__]
 reboot onu                        rebooting onu device


         Remote debug Command details

● help
Shows all menus used as commands



                                         53
XGSPON-STICK

typ:isadmin@NOKIA_NGPON2># remote-debug ont ng2:88/1/46 "help"
Format: ASCII
Type Command with Double quotes
    "help"
    "showconfig"
    "saveconfig"
    "onu show key info"
    "counter switch [pon / uni / cpu / clear]"
    "counter gem [index 0 / clear]"
    "counter fec [pon / clear]"
    "counter type [ani / uni / discard]"
    “switch macinfo [key]"
    "switch igmpinfo"
    "lct inet [192.168.200.1]"
    "lct mask [255.255.255.0]"
    "lct mac [00:11:22:aa:bb:cc]"
    "reg_id [string]"
    "rogue_onu [mode 1 / forced_on]"
    "prbs [on / off]"
    "sysmon [mdsync / cpu / process / memory]"
    "loopback [enable | disable] [vid# | all]"
    "tod enable"
    "pps enable"
    "dying-gasp-alarm enable"
    "ssh reset_passwd"
    "ssh uni [enable/disable]"
    "cap [start | stop | show | show detail]"
    "cap filter <reset>"
    "cap f etype [0x[HEX_NUM] | 0x0800 pt [DEC_NUM]]"
    "cap f [vid [DEC_NUM] | mactype [ucast|mcast|bcast] | m __:__:__:__:__:__]"
    "reboot onu"


Status: SUCCES


● showconfig
Show basic information of stick such as image version, serial, registeration id, lct info, etc
typ:isadmin@NOKIA_NGPON2># remote-debug ont ng2:88/1/46 "showconfig"
Format: ASCII
target_image=0 (Actived)
image0_version=NK00_V087.03
image1_version=NK00_V087.02
reg_id=
sn_vsid=0x5a524d54
sn_vssn=0x67060046
equipment_id=ZXOS11NPI
prbs_mode=0
rogue_onu=1
lct inet=192.168.200.1
lct mask=255.255.255.0
lct mac=00.0b.6f.aa.00.02
iphost inet=
iphost mask=
iphost gateway=

Status: SUCCESS


● saveconfig
Saves the config modified by remote debug to flash memory. If the config value is changed,
“saveconfig” must be executed.
typ:isadmin@NOKIA_NGPON2># remote-debug ont ng2:88/1/46 "saveconfig"
Format: ASCII
Config save complete

Status: SUCCESS




                                                 54
XGSPON-STICK


● onu show key info
Shows key exchange and encryption information
typ:isadmin@NOKIA_NGPON2># remote-debug ont ng2:88/1/46 "onu show key info"
Format: ASCII
    key change counter   4
    omci key count       0
    omci key now index   0
    omci key index 0     482
    omci key index 1     0
    omci key index 2     0
    omci key index 3     0
    set ring key count   0
    set ring key index   0
    alloc pq key count   0
    alloc pq key index   0
    latest key index     2
    UNICAST KEY 1(buf)   3c3206ec ******** ******** ********
    UNICAST KEY 2(buf)   459bf3a6 ******** ******** ********
    UNICAST KEY 1(reg)   3c3206ec ******** ******** ********
    UNICAST KEY 2(reg)   459bf3a6 ******** ******** ********
    BROADCAST KEY 1(buf) 00000000 ******** ******** ********
    BROADCAST KEY 2(buf) 00000000 ******** ******** ********
    BROADCAST KEY 1(reg) 00000000 ******** ******** ********
    BROADCAST KEY 2(reg) 00000000 ******** ******** ********

Status: SUCCESS


● counter switch [pon/uni/cpu/clear]
Shows the traffic counter of the switch inside the stick. When clearing, the counters of pon, uni,
and all CPUs are cleared
typ:isadmin@NOKIA_NGPON2># remote-debug ont ng2:81/1/42 "counter switch clear"
Format: ASCII
ethc switch counter cleared
Status: SUCCESS

typ:isadmin@NOKIA_NGPON2># remote-debug ont ng2:24/1/64 "counter switch pon"
Format: ASCII

PORT[0] - PON side Traffic counter
[RX] good : 0x000000012064e738 (4838451000) bytes
     bad : 0x0000000000000000 (0) bytes
-----------------------------------------------
UniCast(Rx)         : 3225634
UniCast(Tx)         : 3225661
MultiCast(Rx)       : 0
MultiCast(Tx)       : 0
BroadCast(Rx)       : 0
BroadCast(Tx)       : 0
Packets ~64(Rx)      : 0
Packets ~64(Tx)      : 0
Packets 65~127(Rx) : 0
Packets 65~127(Tx) : 0
Packets 128~255(Rx) : 0
Packets 128~255(Tx) : 0
Packets 256~511(Rx) : 0
Packets 256~511(Tx) : 0
Packets 512~1023(Rx) : 0
Packets 512~1023(Tx) : 0
Packets 1024~(Rx)    : 3225662
Packets 1024~(Tx)    : 3225661
Pause(Rx)           : 0
Pause(Tx)           : 0
Under(Rx)           : 0
Under(Tx)           : 0
Over(Rx)            : 0



                                               55
XGSPON-STICK

Over(Tx)            : 0
Fragment            : 0
Jabber              : 0
RxErr               : 0
FCS                : 0
SOB                : 0
EOB                : 0
Ready               : 0
RateLimitDrop        : 0
PortMapDrop          : 0
PortDrop            : 0
-----------------------------------------------

Status: SUCCESS

typ:isadmin@NOKIA_NGPON2># remote-debug ont ng2:24/1/64 "counter switch uni"
Format: ASCII

PORT[1] - UNI side Traffic counter
[RX] good : 0x000000013d32acc4 (5321698500) bytes
     bad : 0x0000000000000000 (0) bytes
-----------------------------------------------
UniCast(Rx)          : 3547798
UniCast(Tx)          : 3547826
MultiCast(Rx)        : 0
MultiCast(Tx)        : 0
BroadCast(Rx)        : 0
BroadCast(Tx)        : 0
Packets ~64(Rx)      : 0
Packets ~64(Tx)      : 0
Packets 65~127(Rx) : 0
Packets 65~127(Tx) : 0
Packets 128~255(Rx) : 0
Packets 128~255(Tx) : 0
Packets 256~511(Rx) : 0
Packets 256~511(Tx) : 0
Packets 512~1023(Rx) : 0
Packets 512~1023(Tx) : 0
Packets 1024~(Rx)     : 3547827
Packets 1024~(Tx)     : 3547826
Pause(Rx)           : 0
Pause(Tx)           : 0
Under(Rx)           : 0
Under(Tx)           : 0
Over(Rx)            : 0
Over(Tx)            : 0
Fragment            : 0
Jabber              : 0
RxErr               : 0
FCS                : 0
SOB                : 0
EOB                : 0
Ready               : 0
RateLimitDrop        : 0
PortMapDrop          : 0
PortDrop            : 0
-----------------------------------------------

Status: SUCCESS

typ:isadmin@NOKIA_NGPON2># remote-debug ont ng2:24/1/64 "counter switch cpu"
Format: ASCII

PORT[8] - CPU side Traffic counter
[RX] good : 0x0000000000000000 (0) bytes
     bad : 0x0000000000000000 (0) bytes
-----------------------------------------------
UniCast(Rx)         : 0
UniCast(Tx)         : 0
MultiCast(Rx)       : 0



                                                  56
XGSPON-STICK

MultiCast(Tx)        : 0
BroadCast(Rx)        : 0
BroadCast(Tx)        : 0
Packets ~64(Rx)      : 0
Packets ~64(Tx)      : 0
Packets 65~127(Rx) : 0
Packets 65~127(Tx) : 0
Packets 128~255(Rx) : 0
Packets 128~255(Tx) : 0
Packets 256~511(Rx) : 0
Packets 256~511(Tx) : 0
Packets 512~1023(Rx) : 0
Packets 512~1023(Tx) : 0
Packets 1024~(Rx)    : 0
Packets 1024~(Tx)    : 0
Pause(Rx)           : 0
Pause(Tx)           : 0
Under(Rx)           : 0
Under(Tx)           : 0
Over(Rx)            : 0
Over(Tx)            : 0
Fragment            : 0
Jabber              : 0
RxErr               : 0
FCS                : 0
SOB                : 0
EOB                : 0
Ready               : 0
-----------------------------------------------

Status: SUCCESS


● counter gem [index 0/clear]
It shows upstream counter by gem port of pon block inside stick. First, enable and use, and
disable when finished. When clearing, the count of all gem ports is cleared.
typ:isadmin@NOKIA_NGPON2># remote-debug ont ng2:81/1/42 "counter gem index 1"
Format: ASCII
gem_port_instance: 0xfffe(0)
gem_port_instance: 0x03ff(1)
    Received_gem_frames      : 55335287
    Transmitted_gem_frames : 55506635
    Received_payload_bytes : 7082916624
    Transmitted_payload_bytes: 7104848146
gem_port_instance: 0xfffd(2)
gem_port_instance: 0x0400(3)
gem_port_instance: 0x0401(4)
Status: SUCCESS

typ:isadmin@NOKIA_NGPON2># remote-debug ont ng2:81/1/42 "counter gem clear"
Format: ASCII
gem_port_instance(index): 0xfffe(0) Counter Cleared
gem_port_instance(index): 0x03ff(1) Counter Cleared
gem_port_instance(index): 0xfffd(2) Counter Cleared
gem_port_instance(index): 0x0400(3) Counter Cleared
gem_port_instance(index): 0x0401(4) Counter Cleared
Status: SUCCESS


● counter fec [pon/clear]
Show fec counter of pon port in stick.
typ:isadmin@NOKIA_NGPON2># remote-debug ont ng2:81/1/42 "counter fec pon"
Format: ASCII
Corrected_bytes        : 0
Corrected_code_words    : 0
Uncorrectable_code_words: 0
Total_code_words       : 40588101




                                                  57
XGSPON-STICK

Status: SUCCESS

typ:isadmin@NOKIA_NGPON2># remote-debug ont ng2:81/1/42 "counter fec clear"
Format: ASCII
pon fec counter cleared
Status: SUCCESS


● counter type [ani / uni / discard]
Show us/ds counter at the ONU between UNI and ANI interfaces.
typ:isadmin@NOKIA_NGPON2># remote-debug ont ng2:24/1/38 "counter type ani"
Format: ASCII
ANI side traffic counter
------------------------------------
UniCast(DS) : 1652427
UniCast(US) : 1652252
MultiCast(DS) : 1
MultiCast(US) : 0
BroadCast(DS) : 0
BroadCast(US) : 0
------------------------------------
to counter reset, "counter switch clear"

Status: SUCCESS
typ:isadmin@NOKIA_NGPON2># remote-debug ont ng2:24/1/38 "counter type uni"
Format: ASCII
UNI side traffic counter
------------------------------------
UniCast(DS) : 1652427
UniCast(US) : 1652252
MultiCast(DS) : 1
MultiCast(US) : 0
BroadCast(DS) : 0
BroadCast(US) : 0
------------------------------------
to counter reset, "counter switch clear"

typ:isadmin@NOKIA_NGPON2># remote-debug ont ng2:24/1/38 "counter type discard"
Format: ASCII
Discarded counter
-----------------------------
DS(P0) : 0
US(P1) : 0
-----------------------------
to counter reset, "counter switch clear"

Status: SUCCESS


● switch macinfo [key]
Unicast MAC addresses learned by the ONU, if MAC bridge learning is used.
Considering the buffer size, the max list is limited to 1000, and if you want to output the counter
after 1000, insert the Next Key that is output after executing the command and print the list after
that.
typ:isadmin@NOKIA_NGPON2># remote-debug ont ng2:24/1/38 "switch macinfo 0"
Format: ASCII
-------------------------------------------------------------
    mac address   | port | fid | aging time | attr
-------------------+---------+--------+------------+---------
 00:10:94:00:00:02 | PON |         0 |       125 | dynamic
 00:10:94:00:00:01 | UNI |         0 |       125 | dynamic
 3C:8B:CD:F0:5E:39 | PON |         0 |        33 | dynamic
-------------------------------------------------------------
Total mac count : 3
Next Key : 0, "switch macinfo 0"

Status: SUCCESS



                                                58
XGSPON-STICK


● switch igmpinfo
List of multiList of multicast IP addresses or related MAC addresses learned by the ONU through
the IGMP protocol.
typ:isadmin@NOKIA_NGPON2># remote-debug ont ng2:24/1/38 "switch igmpinfo"
Format: ASCII
IGMP packet information
------------------------------------------
 Port |         MAC      |      IP    |
------+-------------------+---------------
   1    00:10:94:00:00:05 192.85.1.7
------------------------------------------

Status: SUCCESS


● lct [inet/mask/mac]
Modify network information to be used for SSH, etc. can check it with “showconfig” and save it
as “saveconfig”
typ:isadmin@NOKIA_NGPON2># remote-debug ont ng2:88/1/46 "lct inet 192.168.200.1"
Format: ASCII
inet : 192.168.200.1
Modified, Must execute "saveconfig"
This value is adapted after reset

Status: SUCCESS

typ:isadmin@NOKIA_NGPON2># remote-debug ont ng2:88/1/46 "lct mask 255.255.255.0"
Format: ASCII
netmask : 255.255.255.0
Modified, Must execute "saveconfig"
This value is adapted after reset

typ:isadmin@NOKIA_NGPON2># remote-debug ont ng2:88/1/46 "lct mac 00:11:22:aa:bb:cc"
Format: ASCII
mac = 00:11:22:aa:bb:cc
Modified, Must execute "saveconfig"
This value is adapted after reset

Status: SUCCESS
typ:isadmin@NOKIA_NGPON2># remote-debug ont ng2:88/1/46 "saveconfig"
Format: ASCII
Config save complete

Status: SUCCESS


● reg_id [string]
Modify the registeration id passed to PLOAM. The string count that can be transferred to the
remote debug is limited, so you can enter up to 18 characters, and you can check it with
“showconfig”. After changing, save it as “saveconfig”
typ:isadmin@NOKIA_NGPON2>#remote-debug ont ng2:88/1/46 "reg_id XGSPON"
Format: ASCII
reg_id=XGSPON
Modified, Must execute "saveconfig"

Status: SUCCESS

typ:isadmin@NOKIA_NGPON2># remote-debug ont ng2:88/1/46 "saveconfig"
Format: ASCII
Config save complete

Status: SUCCESS




                                               59
XGSPON-STICK


● rogue_onu [mode 1/forced_on]
Rogue onu is forcibly generated for test purposes. There are only two types of rogue_onu mode:
1 (rogue_onu detect enable) and 32768 (rogue onu occurred).
typ:isadmin@NOKIA_NGPON2># remote-debug ont ng2:88/1/46 "rogue_onu mode 1"
Format: ASCII
Do not rogue_onu test Again, If you want, After reboot
rogue_onu=0x0001, Must execute "saveconfig"

Status: SUCCESS

typ:isadmin@NOKIA_NGPON2># remote-debug ont ng2:88/1/46 "saveconfig"
Format: ASCII
Config save complete

Status: SUCCESS

typ:isadmin@NOKIA_NGPON2># remote-debug ont ng2:88/1/46 "rogue_onu forced_on"

Format: ASCII

Status: FAILED

* As onu goes to rogue_onu immediately, can't normal Upstream traffic, so the status is displayed
as FAILED.

● prbs [on/off]
Turn on "prbs on" for the purpose of prbs test. After setting, save it as “saveconfig”. If it is set
to “prbs on”, the prbs mode is enabled at the next booting, and the prbs mode is automatically
disabled at the next boot after the test is finished and normal booting is performed
typ:isadmin@NOKIA_NGPON2># remote-debug ont ng2:88/1/46 "prbs on"
Format: ASCII
prbs mode on, Must execute "saveconfig"

Status: SUCCESS

typ:isadmin@NOKIA_NGPON2># remote-debug ont ng2:88/1/46 "prbs off"
Format: ASCII
prbs mode off Must execute "saveconfig"

Status: SUCCESS
typ:isadmin@NOKIA_NGPON2># remote-debug ont ng2:88/1/46 "saveconfig"
Format: ASCII
Config save complete

Status: SUCCESS


● sysmon [mdsync/cpu/process/memory]
Shows the system monitoring information.
typ:isadmin@NOKIA_NGPON2># remote-debug ont ng2:88/1/46 "sysmon mdsync"
Format: ASCII
mibDataSync: 51

Status: SUCCESS

typ:isadmin@NOKIA_NGPON2># remote-debug ont ng2:88/1/46 "sysmon cpu"
Format: ASCII
 CPU usage
cpu usage : 6.199 %

Status: SUCCESS

typ:isadmin@NOKIA_NGPON2># remote-debug ont ng2:88/1/46 "sysmon process"




                                                60
XGSPON-STICK

Format: ASCII
Process status
--------------------
 Task ID | status
-----------+--------
0x0a010003 TIME:IS
0x0a010004 EV
0x0a010005 TIME
0x0a010006 EV
0x0a010007 EV
0x0a010008 TIME
0x0a010009 TIME
0x0a01000a TIME
0x0a01000b EV
0x0a01000c SYSEV
0x0a01000d SYSEV
0x0a01000e SYSEV
0x0a01000f SYSEV
0x0a010010 TIME
0x0b010001 CV
0x0b010005 CV
0x0b010006 CV
0x0b010007 READY
0x0b010008 SEM
0x0b010009 CV
0x0b01000a CV
0x0b01000b TIME
0x0b01000c CV
MTX(Mutex), SEM(Semaphore), EV(Event)
SYSEV(system Event), MSG(Message)
CV(Conditional Variable), SIG(Signal)


Status: SUCCESS

typ:isadmin@NOKIA_NGPON2># remote-debug ont ng2:88/1/46 "sysmon memory"
Format: ASCII
 Memory usage
used/total = 7079040/29564096 (23.944719 %)

Status: SUCCESS




● loopback [enable / disable] [vid#/all]
loopback test at ani port. Specific vlan or all vlan.
typ:isadmin@NOKIA_NGPON2># remote-debug ont ng2:81/1/42 "loopback enable 100"
Format: ASCII
loopback enabled
Status: SUCCESS

typ:isadmin@NOKIA_NGPON2># remote-debug ont ng2:81/1/42 "loopback enable all"
Format: ASCII
loopback enabled
Status: SUCCESS

typ:isadmin@NOKIA_NGPON2># remote-debug ont ng2:81/1/42 "loopback disable"
Format: ASCII
loopback disabled
Status: SUCCESS




● tod enable
Default : disable.
ToD pin is SFP PIN(2).


                                                  61
XGSPON-STICK

After stick is rebooting, then ToD will Disable.(Not support disable command)
typ:isadmin@NOKIA_NGPON2># remote-debug ont ng2:88/1/46 "tod enable"
Format: ASCII
already enabled.

Status: SUCCESS


● pps enable
Default : disable.
PPS pin is SFP PIN(9).
After stick is rebooting, then PPS will Disable. (Not support disable command)
typ:isadmin@NOKIA_NGPON2># remote-debug ont ng2:88/1/46 "pps enable"
Format: ASCII
1PPS output enabled. (SFP-PIN#9)
This setting is only maintained for this lifetime(until reboot). It is disabled on next boot.

Status: SUCCESS


● dying-gasp-alarm enable
Default : disable.
Dying-gasp detecting pin is SFP PIN(7).
After stick is rebooting, then Dying-gasp detecting will Disable. (Not support disable command)
typ:isadmin@NOKIA_NGPON2># remote-debug ont ng2:88/1/46 "dying-gasp-alarm enable"
Format: ASCII
Dying-gasp alarm enabled. (SFP-PIN#7, low-active)
This setting is only maintained for this lifetime(until reboot). It is disabled on next boot.

Status: SUCCESS


● ssh reset_passwd
Set ssh password to default.
typ:isadmin@NOKIA_NGPON2>#remote-debug ont ng2:88/1/46 "ssh reset_passwd"
Format: ASCII
Remote-Debug's password set to the Default value.

Status: SUCCESS




● ssh uni [enable/disable]
Default : disable.
After stick is rebooting, then ssh uni will Disable.
Used for connecting to ssh from Uni side.
typ:isadmin@NOKIA_NGPON2># remote-debug ont ng2:88/1/46 "ssh uni disable"
Format: ASCII
ssh uni disabled.

Status: SUCCESS

typ:isadmin@NOKIA_NGPON2># remote-debug ont ng2:88/1/46 "ssh uni enable"
Format: ASCII
ssh uni enabled.

Status: SUCCESS


● cap start
Start captures incoming and outgoing packets to the CPU.



                                                  62
XGSPON-STICK

typ:isadmin@NOKIA_NGPON2>#remote-debug ont ng2:24/1/64 "cap start"
Format: ASCII
! Capturing ethernet packets has been started.

Status: SUCCESS


● cap stop
Stop captures incoming and outgoing packets to the CPU.
typ:isadmin@NOKIA_NGPON2>#remote-debug ont ng2:24/1/64 "cap stop"
Format: ASCII
! Capturing ethernet packets has been stopped.

Status: SUCCESS


● cap stop
Stop captures incoming and outgoing packets to the CPU.
typ:isadmin@NOKIA_NGPON2>#remote-debug ont ng2:24/1/64 "cap stop"
Format: ASCII
! Capturing ethernet packets has been stopped.

Status: SUCCESS


● cap show
Show captured incoming and outgoing packets to the CPU.
typ:isadmin@NOKIA_NGPON2>#remote-debug ont ng2:24/1/64 "cap show"
Format: ASCII
Total captured packets: 1
[        0]    5:56:47.088014 RX<-PON len=76         DA/SA=01:00:5e:00:00:01   3c:8b:cd:f0:5e:39
tag=outer{p7:606 }               etype=0800h(IPv4), protocol=02h(IGMP)

Status: SUCCESS


● cap show detail
Show detail captured incoming and outgoing packets to the CPU.
typ:isadmin@NOKIA_NGPON2>#remote-debug ont ng2:24/1/64 "cap show"
Format: ASCII
Total captured packets: 1
[     0] 5:56:47.088014 RX<-PON len=76    cpu_tag={08 10 08 04 00 25 e0 00} tag=outer{p7:606 }
etype=0800h(IPv4), protocol=02h(IGMP)
   00000000 01 00 5e 00 00 01 3c 8b cd f0 5e 39 81 00 e2 5e ..^...<...^9...^
   00000010 08 00 46 c0 00 20 00 00 00 00 01 02 44 17 00 00 ..F.. ......D...
   00000020 00 00 e0 00 00 01 94 04 00 00 11 64 ee 9b 00 00 ...........d....
   00000030 00 00 00 00 00 00 00 00                         ........

Status: SUCCESS


● cap f etype [0x[HEX_NUM] | 0x0800 pt [DEC_NUM]]
Set capture packet’s filter configure.
typ:isadmin@NOKIA_NGPON2>#remote-debug ont ng2:24/1/64 "cap f etype 0x0800 pt 2"
Format: ASCII
Capture filter ethertype : 0x800
Capture filter ip_protocol: 2

Status: SUCCESS


● cap f [vid [DEC_NUM] | mactype [ucast|mcast|bcast] | m __:__:__:__:__:__]
Set capture packet’s filter configure.



                                               63
XGSPON-STICK

typ:isadmin@NOKIA_NGPON2># remote-debug ont ng2:24/1/64 "cap f vid 200"
Capture filter vid 200

Status: SUCCESS

typ:isadmin@NOKIA_NGPON2># remote-debug ont ng2:24/1/64 "cap f mactype ucast"
Format: ASCII
Response txt is NONE.

Status: SUCCESS

typ:isadmin@NOKIA_NGPON2># remote-debug ont ng2:24/1/64 "cap f m 00:11:22:33:44:55"
Format: ASCII
Capture filter MAC Address : 00:11:22:33:44:55

Status: SUCCESS


● cap filter
Show capture packet’s filtering info.
typ:isadmin@NOKIA_NGPON2>#remote-debug ont ng2:24/1/64 "cap f etype 0x0800 pt 2"
[Filter List]
----------------------
Ethernet Type : 0800h(2048)
    IP Protocol: 2
    OpCode     : SHOW_ALL
TX/RX_Port     : SHOW_ALL
VLAN ID        : 200
Dst MAC Type : Unicast
MAC Address    : 00:11:22:33:44:55

Status: SUCCESS


● cap filter reset
Reset capture packet’s filtering info.
typ:isadmin@NOKIA_NGPON2># remote-debug ont ng2:24/1/64 "cap f etype 0x0800 pt 2"
Capture filter has been reset.

Status: SUCCESS


● reboot onu
Restart onu device. (Because it reboots immediately, the omci response Status is always FAILED)l
typ:isadmin@NOKIA_NGPON2># remote-debug ont ng2:24/1/64 "reboot onu"
Format: ASCII

Status: FAILED




                                               64
XGSPON-STICK




                                                                       CLI


ZXOS11NPI provides CLI for device management. CLI can be used using UART, SSH and Telnet.


15.1 Command list

 section              command         comment
 Environment          ver             Show version
                      setenv          Set environment
                      getenv          Show environment
                      printenv        Show environment
                      saveenv         Save environment
                      passwd          Set password for SSH
 Data access          zreg            Show asic register, set asic register
                      zdump           Show the history of omci/register settings.
 ONU Management       onu             Show pon info
                      tftp            Get image from UNI
                      wflash *        Upgrade using the image obtained by tftp.
 L2 switch            switch          Show switch info
                      mcast           Show mcast group, enable log
 OMCI                 showme          Show ME
                      omci            Set attribute of ME for development
                      alarm           Generate alarm for development
                      arc             Enable alaram generation for development
 Laser Driver         sfp             Show sfp info / set sfp info
                      tx_state        Enable/disable optical TX
 Log                  log             Show log, set log level
 cpu/mem status       sysmon          Show cpu/mem usage



                                           65
XGSPON-STICK


 test                   test *           Temporarily enable tod/pps/dying-gasp-alarm for
                                         test
 Debug trace            synce            Show synce detail log
                        ssh *            SSH packet trace and enable ssh on uni side.
                        console/con *    Enable console output
                        CFM              CFM command
                        debug *          Development test command for inter cpu
                                         communication
 Packet Capture         capture          Show captured incoming and outgoing packets to
                                         the CPU.



15.2 Command Syntax and Format

     Format                                           Description
 Bold string          Command
 Italics              parameter
 < A| B >             Optional parameter, nothing or select one of them(A or B in case of left)
 [ A| B ]             Parameter, select one of them(A or B in case of left)




15.3. Commend details

● ver
Read software version
ZXOS11NPI [/] # ver
onu/omci stack version: 0.81.9-zaram (build 11987) Aug 14 2020 17:46:40
pon version: 0.3
ethc version: 0.3
image0: XXSD___V0.81.9 valid active committed
image1: XXSD___V0.81.9 valid




15.3.1. Environment Variable Management

        env_name            Default                              Description
 target_image                  0        Target image ( 0 or 1)
 tc_type                       1        0(2.5G), 1(10G)
 tx_split                      1        1(GEM split enable), 0(disable)
 sn_vsid                    “ZRMT”      VSID
 sn_vssn                       -        VSSN
 vendor_product_code         0xffff     Product code
 config_path                   -        Full path of Configuration profile



                                                66
XGSPON-STICK

 rogue_onu                      1        1(enable), 0(disable), 0x8000(occurred rogue one)
 sfp_pps                        0        PPS value, 0(disable), otherwise(enable)
 sfp_tod                        0        Time of Date, 0(disable), otherwise(enable)
 sfp_los                        8        Loss Of Signal, 0(disable), otherwise(enable)
 sfp_mod_abs                    6        Module absent, 0(disable), otherwise(enable)
 stick_board                    1        1(stick board), 0(EVM board)
 inet                           “”       IP address
 netmask                        “”       Netmask
 mac_addr                        -       Device MAC Address
                                   Table. Environment variables

● printenv
Display current settings.

ZXOS11NPI [/] # printenv
fwenv(130) stored at 0x40000, size 4096 bytes, region1 992 bytes, region2 3072 bytes
properties:
target_image=0
image0_addr=0x80000
image1_addr=0x580000
tc_type=1 (10G)
tx_split=1
random_delay=0 (use real random delay)
board_id=0xbd200003
reg_id=ZRMT6789bb02
sn_vsid=0x5a524d54(ZRMT)
sn_vssn=0x6789bb02
board_serial=0x5a524d546789bb02
board_revision=ZX300R03
equipment_id=ZXOS11NPI
vendor_product_code=0xffff
image0_version=XXSD___V0.81.9
image1_version=XXSD___V0.81.9
image0_product_code=ZXOS11NPI
image1_product_code=ZXOS11NPI
ptp_tod_trecv_fix=8430 nsec
config_path=/etc/xgspon_r2.xml
stick_board=0 (EV B/D)
timer_max_wait_allocid=600s
disable_ploam_deactivate=0
drop_big_omci_on_tx_split_0=0
prbs_mode=0
pon_serdes_clock_mode=0 (Dual)
rogue_onu=1
tx_power_off=0
inet=192.168.8.140
netmask=255.255.0.0
mac_addr=02:13:92:d2:8f:79
console_uart=0
tftp mode isn't supported in this f/w
sfp pins are following :
sfp_mod_abs(6) sfp_pps(9) sfp_sync_e(0)
sfp_tod(0)     sfp_los(8) sfp_tx_fault(0) sfp_tx_disable(0)
sfp_rate_select_0(0) sfp_rate_select_1(0)




● getenv env_name
Read environment variables.

example. Read ID of running software image.
ZXOS11NPI [/] # getenv target_image
0




                                               67
XGSPON-STICK


● setenv env_name env_value
Set environment variable. This command set up the variable at temporary. This command saves
environment variables temporarily. If you want to permanently save the changed configuration
values, you need to run the saveenv command.

example. Change the firmware to be executed when rebooting.

Caution] don’t change value except reg_id

ZXOS11NPI [/] # setenv target_image 1
target_image=1


● saveenv
Save the environment variable in flash memory.
ZXOS11NPI [/] # saveenv
config-save offset: 0x00040000(133)
done (494450 usec).
config-save offset: 0x00050000(134)
done (490591 usec).
env load from primary
env load area : 0x00050000


● passwd -u user
Change user’s password(telnet and ssh common).
ONTUSER@ZXOS11NPI [/] # passwd -u ONTUSER
ONTUSER current password:
=== Password rule ===
1. at least 8 characters
2. not allowed to be the same as the userID
3. must contain combined characters
   => numeric, alpha characters

input new password:
re-input password:
00:00:59.472013 [LOGIN] user ONTUSER’s password is changed.


If not exist user, show below text.
ONTUSER@ZXOS11NPI [/] # passwd -u user
Can't get pwd




                                               68
XGSPON-STICK


15.3.2. Data access
● zreg cpu_name dir addr [value|length]
    cpu_name : main, ethc or pon
    dir : rd(read) or wr(write)
    addr : target address (must be aligned by 4bytes)
    value or length : value(in case of dir = wr), length(in case of dir = rd)
read 32-bit register(or memory).

Example 1. Read 16byte data from 0x81000300 in main CPU.
ZXOS11NPI [/] # zreg main rd 0x81000300 4

[0x81000300] 00000000 00000000 ffffffff 00000000


Example 2. Write 0x00000001 in 0x81000300 of main CPU
ZXOS11NPI [/] # zreg main wr 0x81000300 0x00000001
WR [0x81000300] 0x00000001 & 0xffffffff SUCCESS!




zdump omci        [ # | seq range ]
zdump omci #
  -   show total count of OMCI history

zdump omci -N
  -   Shows the last N list of OMCI history.

zdump omci N-M
  -   Shows a list of sequence numbers N to M in OMCI history.
ZXOS11NPI [/] # zdump omci #
OMCI history total items#: 764

ZXOS11NPI [/] # zdump omci -10
OMCI history (total #764 items):
[ 754]      14854928 DS 4cb34c0a 00020000: 19635.Get all alarms next: ONU data(0002).0000: seq 90
[   755]     14855185 US 4cb32c0a 00020000: 19635.Get all alarms next: ONU data(0002).0000: cls
MAC bridge port configuration data(002f) 0x110b
[ 756]      14856910 DS 4cb44c0a 00020000: 19636.Get all alarms next: ONU data(0002).0000: seq 91
[   757]     14857171 US 4cb42c0a 00020000: 19636.Get all alarms next: ONU data(0002).0000: cls
MAC bridge port configuration data(002f) 0x1103
[ 758]      14858897 DS 4cb54c0a 00020000: 19637.Get all alarms next: ONU data(0002).0000: seq 92
[   759]     14859154 US 4cb52c0a 00020000: 19637.Get all alarms next: ONU data(0002).0000: cls
MAC bridge port configuration data(002f) 0x1104
[ 760]      14860884 DS 4cb64c0a 00020000: 19638.Get all alarms next: ONU data(0002).0000: seq 93
[   761]     14861147 US 4cb62c0a 00020000: 19638.Get all alarms next: ONU data(0002).0000: cls
Time Status Message(01b8) 0x0000
[ 762]      14862879 DS 4cb74c0a 00020000: 19639.Get all alarms next: ONU data(0002).0000: seq 94
[   763]     14863142 US 4cb72c0a 00020000: 19639.Get all alarms next: ONU data(0002).0000: cls
System Management(00f0) 0x0000

ZXOS11NPI [/] # zdump omci 100-110
OMCI history (total #764 items):
[ 100]      13360894 DS 4b6c4e0a 00020000: 19308.MIB upload next: ONU data(0002).0000: seq 46
[   101]     13361135 US 4b6c2e0a 00020000: 19308.MIB upload next: ONU data(0002).0000: cls UNI-
G(0108) 0xffff
[ 102]      13362786 DS 4b6d4e0a 00020000: 19309.MIB upload next: ONU data(0002).0000: seq 47
[    103]       13363031 US 4b6d2e0a 00020000: 19309.MIB upload next: ONU data(0002).0000: cls
Priority Queue(0115) 0x0000
[ 104]      13364890 DS 4b6e4e0a 00020000: 19310.MIB upload next: ONU data(0002).0000: seq 48
[    105]       13365135 US 4b6e2e0a 00020000: 19310.MIB upload next: ONU data(0002).0000: cls




                                                69
XGSPON-STICK

Priority Queue(0115) 0x0000
[ 106]      13366864 DS 4b6f4e0a 00020000: 19311.MIB upload next: ONU data(0002).0000: seq 49
[    107]       13367112 US 4b6f2e0a 00020000: 19311.MIB upload next: ONU data(0002).0000: cls
Priority Queue(0115) 0x0001
[ 108]      13370319 DS 4b704e0a 00020000: 19312.MIB upload next: ONU data(0002).0000: seq 50
[    109]       13370562 US 4b702e0a 00020000: 19312.MIB upload next: ONU data(0002).0000: cls
Priority Queue(0115) 0x0001
[ 110]      13371971 DS 4b714e0a 00020000: 19313.MIB upload next: ONU data(0002).0000: seq 51


zdump omci type message_type
message_type : OMCI message type
ZXOS11NPI [/] # zdump omic type 13
OMCI history (total #766 items):
message type to filter: 13(MIB upload)
[     6]    13255347 DS 4b3d4d0a 00020000: 19261.MIB upload: ONU data(0002).0000
[     7]    13255606 US 4b3d2d0a 00020000: 19261.MIB upload: ONU data(0002).0000: next cmds# 222
matching message count: 2

ZXOS11NPI [/] # zdump omic type 9
OMCI history (total #766 items):
message type to filter: 9(Get)
[     0]    12558103 DS 4b3a490a 00020000: 19258.Get: ONU data(0002).0000: mibDataSync
[     1]    12558307 US 4b3a290a 00020000: 19258.Get: ONU data(0002).0000: result 00
[     4]    13253345 DS 4b3c490a 00830000: 19260.Get: OLT-G(0083).0000: oltVendorId
[     5]    13253544 US 4b3c290a 00830000: 19260.Get: OLT-G(0083).0000: result 00
[ 452]      13733708 DS 4c1c490a 011f0000: 19484.Get: Omci(011f).0000: meTypeTable
[ 453]      13733905 US 4c1c290a 011f0000: 19484.Get: Omci(011f).0000: result 00
matching message count: 6




                                               70
XGSPON-STICK


15.3.3. ONU Management
● onu show pon counter
Show counter for gemport.
admin@ZXOS11NPI [/] # onu show pon counter

---------------------------------------------------------
 T-CONT idx : 0 | Alloc-ID : 1026(0x0402)
---------------------------------------------------------
 GEM idx | dir | GEM frames | GEM Payload bytes
---------------------------------------------------------
   001 | Rx |           0 |          0
  0x0402 | Tx |          0 |         0
---------------------------------------------------------
   Dir | total GEM frames | total GEM payload bytes
---------------------------------------------------------
   Rx    |         0      |          0
   Tx    |         0      |          0
---------------------------------------------------------

---------------------------------------------------------
 T-CONT idx : 1 | Alloc-ID : 1027(0x0403)
---------------------------------------------------------
 GEM idx | dir | GEM frames | GEM Payload bytes
---------------------------------------------------------
   003 | Rx |           0 |          0
  0x0403 | Tx |          0 |         0
---------------------------------------------------------
   Dir | total GEM frames | total GEM payload bytes
---------------------------------------------------------
   Rx    |         0      |          0
   Tx    |         0      |          0
---------------------------------------------------------

---------------------------------------------------------
 T-CONT idx : 2 | Alloc-ID : 1028(0x0404)
---------------------------------------------------------
 GEM idx | dir | GEM frames | GEM Payload bytes
-------------------------------------------------------0-
   004 | Rx |           0 |          0
  0x0404 | Tx |          0 |         0
---------------------------------------------------------
   Dir | total GEM frames | total GEM payload bytes
---------------------------------------------------------
   Rx    |         0      |          0
   Tx    |         0      |          0
---------------------------------------------------------
#########################################################
   Dir | total PON frames | total PON payload bytes
---------------------------------------------------------
   Rx    |         0      |            0
   Tx    |         0      |            0
#########################################################

---------------------------------------------------------
PON Rx FEC statistic
---------------------------------------------------------
Corrected byte(8-byte)          : 0
Corrected code wordsi(8-byte)    : 0
Uncorrectable code words(8-byte) : 0
Total code words(8-byte)        : 16528663237
---------------------------------------------------------


● onu reset pon counter
Clear gemport counter



                                               71
XGSPON-STICK

● onu show qos tcont [ idx | all | reg ]
     idx : T-CONT index,
     all : show all T-CONT index, which is available.
     reg : Entering “reg” instead of “idx” shows register information.
Shows T-CONT configuration information of a specific index or register information of all
configured T-CONTs and related register info.

ZXOS11NPI [/] # onu show qos tcont 0
------------------------------------------
T-CONT idx : 0 | Alloc-ID : 1047(0x0417)
------------------------------------------
Alloc-id : 1047(0x0417)
policy : 0
num_of_valid_pq_idx : 2
num_of_spq_idx : 2
num_of_removed : 0
       [0] q_idx : 23(0x17), rm:0
       [1] q_idx : 22(0x16), rm:0
------------------------------------------

ZXOS11NPI [/] # onu show qos tcont reg

------------------------------------------
 T-CONT idx : 0 | Alloc-id : 1047(0x0417)
------------------------------------------
 split[0] exe_ptr[0x0] wrr_ptr[0x0]
 wrr_start[0x10] list_cnt[2]

 - Low LIST index is the highst priority
       LIST_0(q_idx) : 22(0x16) -> GEM idx: 1, GEMPort ID : 1092(0x0444)
       LIST_1(q_idx) : 23(0x17) -> GEM idx: 3, GEMPort ID : 1093(0x0445)
------------------------------------------

------------------------------------------
 T-CONT idx : 1 | Alloc-id : 1044(0x0414)
------------------------------------------
 split[0] exe_ptr[0x0] wrr_ptr[0x0]
 wrr_start[0x10] list_cnt[1]

 - Low LIST index is the highst priority
       LIST_0(q_idx) : 5(0x05) -> GEM idx: 4, GEMPort ID : 1094(0x0446)
------------------------------------------

------------------------------------------
 T-CONT idx : 14 | Alloc-id : 12(0x000C)
------------------------------------------
 split[0] exe_ptr[0x0] wrr_ptr[0x0]
 wrr_start[0x00] list_cnt[0]

 - Low LIST index is the highst priority
------------------------------------------

------------------------------------------
 T-CONT idx : 15 | Alloc-id : 1022(0x03FE)
------------------------------------------
 split[0] exe_ptr[0x0] wrr_ptr[0x0]
 wrr_start[0x00] list_cnt[0]

 - Low LIST index is the highst priority
------------------------------------------


● onu show qos gemport [ idx | all ]
    idx : GEM port index,
    all : show all T-CONT index, which is available.

Shows GEM port configuration information.


                                               72
XGSPON-STICK

ZXOS11NPI [/] # onu show qos gemport 1
----------------------------------------------
GEM port idx : 1 | port ID : 1092(0x0444)
----------------------------------------------
related tcont idx : 0
related queue idx : 22
----------------------------------------------

ZXOS11NPI [/] # onu show qos gemport all
----------------------------------------------
GEM port idx : 0(0x0000) | port ID : 65534(0xFFFE)
----------------------------------------------
related tcont idx : -
related queue idx : -
----------------------------------------------
GEM port idx : 1(0x0001) | port ID : 1092(0x0444)
----------------------------------------------
related tcont idx : 0
related queue idx : 22
----------------------------------------------
GEM port idx : 2(0x0002) | port ID : 65533(0xFFFD)
----------------------------------------------
related tcont idx : -
related queue idx : -
----------------------------------------------
GEM port idx : 3(0x0003) | port ID : 1093(0x0445)
----------------------------------------------
related tcont idx : 0
related queue idx : 23
----------------------------------------------
GEM port idx : 4(0x0004) | port ID : 1094(0x0446)
----------------------------------------------
related tcont idx : 1
related queue idx : 5
----------------------------------------------

● onu show qos queue [ idx | all ]
    idx : Queue index,
    all : show all T-CONT index, which is available.

 Shows queue configuration information of a specific index or register information of all
configured queues.
ZXOS11NPI [/] # onu show qos queue 1
-------------------------------
Queue idx : 1
-------------------------------
related tcont idx : 22(0x0016)
ralated gemport_id : 0(0x0000)
omci-priority : -1
policy : 3
weight : 197700
removed : 0
-------------------------------


ZXOS11NPI [/] # onu show qos queue all
-------------------------------
Queue idx : 0
-------------------------------
related tcont idx : -1(0xFFFFFFFF)
ralated gemport_id : -1(0xFFFFFFFF)
omci-priority : -1
policy : 2
weight : 65534
removed : 0
-------------------------------
Queue idx : 1
-------------------------------



                                                 73
XGSPON-STICK

related tcont idx : 22(0x0016)
ralated gemport_id : 0(0x0000)
omci-priority : -1
policy : 3
weight : 197700
removed : 0
-------------------------------
Queue idx : 2
-------------------------------
related tcont idx : -1(0xFFFFFFFF)
ralated gemport_id : -1(0xFFFFFFFF)
omci-priority : -1
policy : 2
weight : 65533
removed : 0
-------------------------------
Queue idx : 3
-------------------------------
related tcont idx : 23(0x0017)
ralated gemport_id : 0(0x0000)
omci-priority : -1
policy : 3
weight : 197701
removed : 0
-------------------------------
Queue idx : 4
-------------------------------
related tcont idx : 5(0x0005)
ralated gemport_id : 1(0x0001)
omci-priority : -1
policy : 3
weight : 197702
removed : 0

● onu show pq
It shows ME instance, GEM port id, T-CONT index, etc. related to priority queue.
ZXOS11NPI [/] # onu show pq
========================================================================================
 Upstream priority queue mapping
 PQ ME pririty : 0 is highest                                   *inst-id: instance id
--------|--------------------|----------|--------|--------------------|-----------------
 pq-buf |------ PQ ME -------| GEM port | T-CONT |----- T-CONT ME ----|--802.1p Mapper--
 idx    | inst-id | priority | inst-id | index | inst-id | alloc-id | inst-id | index
--------|---------+----------|----------|--------|---------+----------|-----------------
 14       0x8016   6          0x0444    0       0x8001    0x0426     0x1102   0
 15       0x8017   7          0x0445    0       0x8001    0x0426     0x1103   1
 5        0x8005   5          0x0446    1       0x8000   0x0414     0x1104    2
========================================================================================


● onu show key info
It shows key exchange and encryption information.
ZXOS11NPI [/] # onu show key info
    key change counter   1
   omci key count       0
   omci key now index    0
   omci key index 0      276
   omci key index 1      0
   omci key index 2      0
   omci key index 3      0
   set ring key count    0
   set ring key index    0




                                               74
XGSPON-STICK

   alloc pq key count     0
   alloc pq key index     0
   latest key index       1
   UNICAST KEY 1(buf)     52d63420 ******** ******** ********
   UNICAST KEY 2(buf)     00000000 ******** ******** ********
   UNICAST KEY 1(reg)     52d63420 ******** ******** ********
   UNICAST KEY 2(reg)     00000000 ******** ******** ********
   BROADCAST KEY 1(buf)   00000000 ******** ******** ********
   BROADCAST KEY 2(buf)   00000000 ******** ******** ********
   BROADCAST KEY 1(reg)   00000000 ******** ******** ********
   BROADCAST KEY 2(reg)   00000000 ******** ******** ********


● onu set loopback [enable/disable] [vid/all]
For swap speed test
MAC swap loopback will be enabled/disabled via OLT-remote-debug-ME / remote-debug-via-ssh.
Specific vlan or all vlan
Only perform the packet MAC swap on the packet received from the OLT. And send the packet
after MAC swap only back to the OLT without touching packet such as vlan.
ZXOS11NPI [/] # onu set loopback enable all
ZXOS11NPI [/] # onu set loopback enable 100
ZXOS11NPI [/] # onu set loopback disable
loopback disable




● tftp ip_addr path/file_name local_path/file_name
     ip_addr : IP Address of TFTP server
     R_file_name : Remote file name in TFTP server.
     L_file_name : Local file name

Get file from remote TFTP server.
ZXOS11NPI [/] # tftp 192.168.1.42 tjchoi/XGS/release/omcid.XXTD_1_V0.82.2 ./omcid.XXTD_1_V0.82.2
tftp: socket 25
tftp: total 897384 bytes received
tftp: saved to "./omcid.XXTD_1_V0.82.2"
file size: 897384 bytes




● wflash file image_address
    file_name : wrote file name
    image_address : wrote address, (0x80000 or 0x580000)

write software image.

ZXOS11NPI [/] # wflash omcid.XXTD_1_V0.82.2 0x580000
file size: 897384 bytes
offset: 0x00580000
done.




15.3.4. L2 Switch Management


                                               75
XGSPON-STICK


● switch show vlan <all>
Display VLAN configuration
No change : packet transparent
Push tag : add tag
Pop outer tag : remove outer tag
Untag: untag
Tag0/1: single tag
Outertag0/1, innertag1/0: double tag
admin@ZXOS11NPI [/] # switch show vlan
----------------------------------------------------------------------------
      |     |     |        |    |Prio- |      |      Egress Tag(1)
  VI- | SID | FID | Member |Prio-|rity |Policy|--+--+--+--+--+--+--+--+--
      |     |     | Port   |rity |Enable|Enable|P8|P7|P6|P5|P4|P3|P2|P1|P0
------+-----+------+8x6543210+-----+------+------+--+--+--+--+--+--+--+--+--
  605     0     0 0-0000011     0      0     0 0 - 0 0 0 0 0 0 0
  606     0     0 0-0000011     0      0     0 0 - 0 0 0 0 0 0 0
  715     0     0 0-0000011     0      0     0 0 - 0 0 0 0 0 0 0
 4095     0     0 0-0000011     0      0     0 0 - 0 0 0 0 0 0 0
----------------------------------------------------------------------------
1.Egress Tag :
  0(no change), 1(Push Tag), 2(Pop Outer Tag), 3(Untag)
  4(Tag 0), 5(Tag 1), 6(OuterTag:0, InnerTag:1), 7(OuterTag:1, InnerTag:0)
 Total VLAN count : 4

● switch show mac
Display mac address list which is learned.
ZXOS11NPI [/] # switch show mac
-------------------------------------------------------------
    mac address   | port | FID | aging time | attr
-------------------+8x6543210+--------+------------+---------
 54:EE:75:90:DF:12 |0-0000010|     0 |         0 | dynamic
 74:D4:35:E4:BA:7A |0-0000010|     0 |         0 | dynamic
 00:0B:6F:50:01:17 |0-0000010|     0 |         0 | dynamic
 30:9C:23:D9:70:89 |0-0000010|     0 |         0 | dynamic
 C8:F8:6D:C4:D3:43 |0-0000001|     0 |         6 | dynamic
 3C:97:0E:1A:21:7C |0-0000010|     0 |         0 | dynamic
 00:25:90:E3:B3:FD |0-0000010|     0 |         0 | dynamic
 00:07:70:C1:1E:A8 |0-0000010|     0 |         1 | dynamic
-------------------------------------------------------------
Total mac count : 8
aging period : 115500


● switch show mpon
Display queue index which is mapped to VLAN.
ZXOS11NPI [/] # switch show mpon
Port mapping:
==========================================
 PORT enable MAP p7 p6 p5 p4 p3 p2 p1 p0
------------------------------------------
  P0    0     -
  P1    1     0 22 22 22 22 22 22 22 22
  P8    0     -
==========================================

VLAN mapping:
===================================
  VID MAP p7 p6 p5 p4 p3 p2 p1 p0
-----------------------------------
  605 0 22 22 22 22 22 22 22 22
  606 1 23 23 23 23 23 23 23 23
  715 2 13 13 13 13 13 13 13 13
===================================




                                               76
XGSPON-STICK


● switch show counter
Display frame counter of each port. This CLI is used for traffic debugging.
Port 0 : ANI-side
Port 1: UNI-side
port 8: CPU-side
Misc Packets
     Pause : pause frame
     Under : frame size is shorter than min length in pctrlb (switch show port ctrl)
     Flag : Under & fcs err
     Over : frame size is longer than frame size in pctrl0 (switch show port ctrl2)
     Jabber : Over & fcs err
 Error Packets
     Rx : error is occur in phy level.
     FCS : occur in phy level or duplex does not fit.
     SOB/EOB : packet is broken.
     Ready : Buffer storing packet is full

ZXOS11NPI [/] # switch show counter

==============================================================================================
                   PON-Rx       PON-Tx         UNI-Rx        UNI-Tx       CPU-Rx       CPU-Tx
----------------------------------------------------------------------------------------------
 ucast            1652427       1652252        1652252       1652427            0            0
 mcast                 11            0              0           11            0          11
 bcast                  0            0              0            0           0             0
 ---------------------------------------------------------------------------------------------
 0~64                   0            0              0            0           0             0
 65~127                11            0              0           11            0           11
 128~255                0            0              0            0            0            0
 256~511                0            0              0            0            0            0
 512~1023               0            0              0            0            0            0
 1024~            1652427       1652252        1652252       1652427            0            0
 ---------------------------------------------------------------------------------------------
 Pause                  0            0              0            0           0             0
 Under                  0            0              0            0           0             0
 Over                   0            0              0            0           0             0
 Fragment               0            -              0            -            0            -
 Jabber                 0            -              0            -           0             -
 ---------------------------------------------------------------------------------------------
 RX err                 0            -              0            -           0             -
 FCS err                0            -              0            -            0            -
 SOB err                0            -              0            -            0            -
 EOB err                0            -              0            -            0            -
 RDY err                0            -              0            -            0            -
 ---------------------------------------------------------------------------------------------
 good-byte      2478641292    2478378000     2478378000    2478641292             0          792
 bad-byte               0            -              0            -            0            -
===============================================================================================
 DROP
======================================================
               rate-limit      PORT-MAP           DROP
------------------------------------------------------
 PON                    0            0              0
 UNI                    0            0              0
======================================================

● switch show counter-clear
Reset Port frame counters
ZXOS11NPI [/] # switch show counter-clear


● switch show us counter [start|check]



                                                77
XGSPON-STICK

For Checking packet drop counters for upstream.
     1) type “switch show us counter start”
     2) type “switch show us counter check”
If negative value is increase continuely, you can check there are packet drop.
ZXOS11NPI [/] # switch show us counter start
switch <-> gemport count start
+-start count--------------------------
| gemport TX      : 47067468
| switch p0 TX     : 47116429
| switch p1 RX     : 47120548
+-------------------------------------
ZXOS11NPI [/] # switch show us counter check
switch <-> gemport count check
If negative value is increase continuely, you can check there are packet drop.
+-check count-----------------------------------
| switch P0[tx:16970656] <-> ANI[tx:16970681]         : 25
| switch P1[rx:16970755] <-> P0[tx:16970656]     : -99
+-----------------------------------------------
ZXOS11NPI [/] # switch show us counter check
switch <-> gemport count check
If negative value is increase continuely, you can check there are packet drop.
+-check count-----------------------------------
| switch P0[tx:23257333] <-> ANI[tx:23263073]         : 5740
| switch P1[rx:23258683] <-> P0[tx:23257333]     : -1350
+-----------------------------------------------
ZXOS11NPI [/] # switch show us counter check
switch <-> gemport count check
If negative value is increase continuely, you can check there are packet drop.
+-check count-----------------------------------
| switch P0[tx:28562177] <-> ANI[tx:28568800]         : 6623
| switch P1[rx:28563593] <-> P0[tx:28562177]     : -1416
+-----------------------------------------------
ZXOS11NPI [/] # switch show us counter check
switch <-> gemport count check
If negative value is increase continuely, you can check there are packet drop.
+-check count-----------------------------------
| switch P0[tx:33666411] <-> ANI[tx:33670368]         : 3957
| switch P1[rx:33667374] <-> P0[tx:33666411]     : -963
+-----------------------------------------------
ZXOS11NPI [/] # switch show us counter check
switch <-> gemport count check
If negative value is increase continuely, you can check there are packet drop.
+-check count-----------------------------------
| switch P0[tx:39170035] <-> ANI[tx:39174052]         : 4017
| switch P1[rx:39171444] <-> P0[tx:39170035]     : -1409
+-----------------------------------------------
ZXOS11NPI [/] # switch show us counter check
switch <-> gemport count check
If negative value is increase continuely, you can check there are packet drop.
+-check count-----------------------------------
| switch P0[tx:44869834] <-> ANI[tx:44875541]         : 5707
| switch P1[rx:44871309] <-> P0[tx:44869834]     : -1475
+-----------------------------------------------


● switch rule [0~6] [action] <value>
 [action]        <value>                        description
 clear                                          Delete rule.
 smac            [dis|val] Disable or           Compare source mac and if matched, perform
                 AA:BB:CC:DD:EE:FF(MAC)         action.
                 XX:XX:XX:XX:XX:XX(MASK)
 dmac            [dis|val] Disable or           Compare destination mac and if matched,
                 AA:BB:CC:DD:EE:FF(MAC)         perform action.
                 XX:XX:XX:XX:XX:XX(MASK)
 sip             [dis|val] Diable or            Compare source ip and if matched, perform


                                               78
XGSPON-STICK

                    A.B.C.D(IP) X.X.X.X(MASK)      action.
 dip                [dis|val] Diable or            Compare destination ip and if matched,
                    A.B.C.D(IP) X.X.X.X(MASK)      perform action.
 sport              [dis|val]                      Compare source port and if matched, perform
                    Disable or <0-65535>           action.
 dport              [dis|val]                      Compare destination port and if matched,
                    Disable or <0-65535>           perform action.
 vlan               [dis|val]                      Compare vlan and if matched, perform action.
                    Disable or <1-4094>
 protocol           [dis|val]                      Compare protocol and if matched, perform
                    Disable or <0-255>             action.
 ethertype          [dis|val] Disable or           Compare ethertype and if matched, perform
                    <0-65535<(ethertype)           action.
                    <0-65535>(MASK)
 interface          [pon|cpu|uni] [en|dis]         Compare input port and if matched, perform
                                                   action.
 action drop        [en|dis]                       Matched packets are dropped.
 action counter     [en|dis]                       Matched packets can be counted. It can also
                                                   be found in the CLI show apply.
 show                                              Display CLI “apply and profile”
 show apply                                        Display compare rule.
 show profile                                      Display action rule.
 apply                                             It is necessary to apply the rules.

 Procedure for applying rules.
    1) Set compare(match) rule you want. (smac ~ interface)
ZXOS11NPI [/] # switch rule 1 smac 00:0b:6f:aa:00:02 ff:ff:ff:ff:Ff:ff
smac: 00:0b:6f:aa:00:02 mask: ff:ff:ff:ff:Ff:ff
ZXOS11NPI [/] # switch rule 1 dmac 00:0b:6f:aa:00:03 ff:ff:ff:ff:ff:ff
dmac: 00:0b:6f:aa:00:03 mask: ff:ff:ff:ff:ff:ff
ZXOS11NPI [/] # switch rule 1 sport 80
sport: 80
ZXOS11NPI [/] # switch rule 1 dport 23
dport: 23
ZXOS11NPI [/] # switch rule 1 vlan 100
vlan: 100, mask: 4095
ZXOS11NPI [/] # switch rule 1 protocol 1
protocol: 1, mask: 1
ZXOS11NPI [/] # switch rule 1 ethertype 2048 65535
ethertype: 0x800, mask: 0xffff
ZXOS11NPI [/] # switch rule 9 interface uni en
interface port: 1 enable: 1, uni en
ZXOS11NPI [/] # switch rule 1 interface pon en
interface port: 0 enable: 1, pon en


       2) Set action rule. (drop/counter)
ZXOS11NPI [/] # switch rule 1 action counter en
counter enable
ZXOS11NPI [/] # switch rule 1 action drop en
drop enable


       3) Apply the rule.

ZXOS11NPI [/] # switch rule 1 apply
00:12:35.401222 [ETH] ACL Add Success: 1




                                                  79
XGSPON-STICK

     4) Check the rule.

         Packets where Smac is 00:0B:6F:AA:00:02, dmac is 00:0B:6F:AA:00:03, src port is 80,
         dport is 23, vlan id is 100, ethertype is 2048(0x0800), protocol is 1 and input port is uni
         or pon(ani) are dropped and counted.
ZXOS11NPI [/] # switch rule 1 show
[Profile Rule]
INDEX: 1
 smac - 00:0B:6F:AA:00:02
 smask - FF:FF:FF:FF:FF:FF
 dmac - 00:0B:6F:AA:00:03
 dmask - FF:FF:FF:FF:FF:FF
 src port: 80
 dst port: 23
 vlan id: 100, mask: 4095
 ethertype: 2048, mask: 65535
 protocol: 1, mask: 1
 inputport: pon, uni
Action
 drop: enable
 count: enable

[Applied Rule]
INDEX: 1
 rule index: 11 vid: 100 vid_mask: 0xfff
 rule index: 1 etype: 0x0800 mask: 0xffff
 rule index: 1 sport: 80 mode:0 (0:exact match, 1: not match 2: equal or great, 3: equal or less)
 rule index: 2 dport: 23 mode:0 (0:exact match, 1: not match 2: equal or great, 3: equal or less)
 rule index: 7 smac: 00:0b:6f:aa:00:02 mask: ff:ff:ff:ff:ff:ff
 rule index: 8 dmac: 00:0b:6f:aa:00:03 mask: ff:ff:ff:ff:ff:ff
 inputport: pon, uni
 protocol: 0x01
Action
 Drop: enable
 Count: enable
 Count: 0

     5) delete the rule.
admin@ZXOS11NPI [/] # switch rule 1 clear
admin@ZXOS11NPI [/] # switch rule 1 apply
00:25:54.493698 [ETH] ACL Add Success: 1




● switch rule entry
switch rule entry : display applied filter/counter list all.
ZXOS11NPI [/] # switch rule entry
INDEX[8] acl entry is exist
  etype_match
  dport_match
  dmac_match
INDEX[9] acl entry is exist
  etype_match
  dport_match
  dmac_match


● switch show acl entry <#idx>
This CLI shows action of rule about specific packet. (matching condition)
ZXOS11NPI [/] # switch show acl entry
INDEX[52] acl entry is exist
  vid_match
INDEX[53] acl entry is exist
  vid_match




                                                   80
XGSPON-STICK

INDEX[76] acl entry is exist
  etype_match
  dmac_match
INDEX[97] acl entry is exist
  dmac_match
INDEX[100] acl entry is exist
  dmac_match
INDEX[101] acl entry is exist
  dmac_match
INDEX[102] acl entry is exist
INDEX[103] acl entry is exist
INDEX[104] acl entry is exist
INDEX[105] acl entry is exist
  dmac_match
INDEX[106] acl entry is exist
  dip_match
INDEX[107] acl entry is exist
  dmac_match
INDEX[110] acl entry is exist
  etype_match
  dmac_match
INDEX[111] acl entry is exist
  etype_match
  dmac_match
INDEX[112] acl entry is exist
  etype_match
  dport_match
  dmac_match
INDEX[113] acl entry is exist
  etype_match
  dmac_match
INDEX[114] acl entry is exist
  etype_match
  dport_match
  dmac_match
INDEX[115] acl entry is exist
  etype_match
  dmac_match
INDEX[125] acl entry is exist
  smac_match
INDEX[126] acl entry is exist
  smac_match
INDEX[127] acl entry is exist
  smac_match

ZXOS11NPI [/] # switch show acl entry 52
INDEX: 52
 rule index: 9 vid: 10 vid_mask: 0xfff
 inputport: 100000000
 ip_type: 0x4(0b: ipv4 broad 1b:ipv6 multi 2b:ipv4 multi 3b:not multi not broad)
 mac_type: 0x0(0b: broad 1b:multi 2b:uni)
 fragment: 0x0(0b:fragmented 1b:1st fragment 2b:unfragmented)
 vlantag: 0x0(0b:tag 1b:pri tag 2b:untag)
 llc: 0x0(0b:else 1b: LLC_SNAP 2b:LLC)
 mpls: 0x0(0b:not valid 1b:valid)
 ip_ver: 0x0(0b:else 1b:ipv6 2b:ipv4)
 etc_dhcp: 0x0
 etc_ipv6: 0x0(0b:ND 1b:MLD)
 etc_icmp: 0x00
 etc_igmp: 0x0
 protocol: 0x00 protocol_mask: 0x0
 tcpflag: 0x000 tcpflag_mask: 0x000

ACL_COUNT: 0


● switch show acl action <#idx>
This CLI shows action of rule about specific packet. (result action)




                                                81
XGSPON-STICK

ZXOS11NPI [/] # switch show acl action
action entry[52]
action entry[53]
action entry[76]
action entry[97]
action entry[100]
action entry[101]
action entry[102]
action entry[103]
action entry[104]
action entry[105]
action entry[106]
action entry[107]
action entry[110]
action entry[111]
action entry[112]
action entry[113]
action entry[114]
action entry[115]
action entry[125]
action entry[126]
action entry[127]

ZXOS11NPI [/] # switch show acl action 52
+-- VALID [1]----------------------------------------+
| DROP | TRAP | MIRROR | INTERRUPT | VID | PRIORITY |
+----------------------------------------------------+
| 0 | 0 | 0           |    0       | 10 |     -      |
+----------------------------------------------------+
| DPV     : 012345678 DPV PORT | Increment count |
| Disable : ---------            |     Enable         |
+----------------------------------------------------+
| ACT     : ACT (0-MAGT 6:5-NRL 11-IEEE1588)         |
| Disable : 0x0                                      |
+----------------------------------------------------+




● switch show port ctrl
Display MTU, inner tag VID and TPID on each port.
default VLAN is 4095.
MAX_FRAME_SIZE is MTU.
VID_1 is used to inner tag.
If you look at the index of the TPID table with the numbers of TPID_SEL0 (outer TPID) and
TPID_SEL1 (inner TPID), you can check which TPID will be used when TPID is newly added.
ZXOS11NPI [/] # switch show port ctrl
-PCTRL0---------------------------------------------------------
      |        |           | Priority override |   policy
 port | frame | port state |-------------------+---------------
      | size |             | DA | SA | VTU | DA | SA | VTU
------+--------+------------+------+------+-----+----+----+-----
    0     9216 Forwarding       0     0      1   0    0    3
    1     9216 Forwarding       0     0      1   0    0    3
    2        0    Disabled     0      0     0    0   0    0
    3        0    Disabled     0      0     0    0   0    0
    4        0    Disabled     0      0     0    0   0    0
    5        0    Disabled     0      0     0    0   0    0
    6        0    Disabled     0      0     0    0   0    0
    8     9216 Forwarding       0     0      1   0    0    3
----------------------------------------------------------------
-PCTRLC-----------------------------------------------------
      |            Enable CP               | TAG1 Default
 port |--------------------------------------+--------------
      |DSCP_TAG|DEI1|DEI0|VID1|VID0|PRI1|PRI0|Priority| VID



                                               82
XGSPON-STICK

------+--------+----+----+----+----+----+----+--------+-----
    0         0   0    0   0    0    0    0       0 4095
    1         0   0    0   0    0    0    0       0 4095
    2         0   0    0   0    0    0    0       0 4095
    3         0   0    0   0    0    0    0       0 4095
    4         0   0    0   0    0    0    0       0 4095
    5         0   0    0   0    0    0    0       0 4095
    6         0   0    0   0    0    0    0       0 4095
    8         0   0    0   0    0    0    0       0 4095
------------------------------------------------------------
-PCTRLB-----------------------------------------------------------------
      |      |    |      |          Egress          | Ingress
 port |min |short|enable|---------------------------+-----------------
      |length|count|upload|drop|untag|tag1|tpid0|tpid1|rm tpid|dei0|dei1
------+------+-----+------+----+-----+----+-----+-----+-------+----+----
    0      16    7      1   0     0    0    0     0      0    0   0
    1      16    7      1   0     0    0    0     0      0    0   0
    2       0    0      0   0     0    0    0     0      0    0   0
    3       0    0      0   0     0    0    0     0      0    0   0
    4       0    0      0   0     0    0    0     0      0    0   0
    5       0    0      0   0     0    0    0     0      0    0   0
    6       0    0      0   0     0    0    0     0      0    0   0
    8      16    7      1   0     0    0    0     0      0    0   0
------------------------------------------------------------------------
● switch show port ctrl2
Display outer VID for each port.
PORT_VID : if have not outer tag, use for outer tag.
PRI : if have not tag, use for priority in outer tag.
ZXOS11NPI [/] # switch show port ctrl2
+========= PORT0 =========+
| <PPORT>                 |
| XPRI_EN_1 :           0 |
| XPRIT_EN_0 :          0 |
| XPRI_T     :         0 |
| XPRI_P     :         0 |
| XPRI_U     :         0 |
| PORT_MAP : 011111111 |
| PORT_TRAP :         8 |
| PORT_MIRROR :        8 |
| <TAG0 Default>---------|
| PORT_PRI    :         0 |
| PORT_VID    :     4095 |
| PORT_FID    :         0 |
+========= PORT1 =========+
| <PPORT>                 |
| XPRI_EN_1 :           0 |
| XPRIT_EN_0 :          0 |
| XPRI_T     :         0 |
| XPRI_P     :         0 |
| XPRI_U     :         0 |
| PORT_MAP    : 101111111 |
| PORT_TRAP :           8 |
| PORT_MIRROR :         8 |
| <TAG0 Default>---------|
| PORT_PRI    :         0 |
| PORT_VID    :     4095 |
| PORT_FID    :         0 |
+========= PORT8 =========+
| <PPORT>                 |
| XPRI_EN_1 :           0 |
| XPRIT_EN_0 :          0 |
| XPRI_T     :         0 |
| XPRI_P     :         0 |
| XPRI_U     :         0 |
| PORT_MAP : 111111110 |
| PORT_TRAP :           8 |
| PORT_MIRROR :         0 |
| <TAG0 Default>---------|



                                               83
XGSPON-STICK

| PORT_PRI    :        0 |
| PORT_VID    :     4095 |
| PORT_FID    :        0 |
+=========================+


● switch show acl tpid
Display registered TPID table. You can check the TPID by checking the index with the number of
TPID_SEL0/1 of “switch show ctrl”.
ZXOS11NPI [/] # switch show acl tpid
 Ingress Port ACL VLAN CODE Info (tpid) : vlan tag lookup-engine
-----------------------------------------
 port TYPE0 (outer) TYPE1 (inner)
-----------------------------------------
 0     0x8100          0x8100
 0     0x9100          0x9100
 0     0x88A8          0x88A8
 0     Disabled        Disabled
 0     Disabled        Disabled
 0     Disabled        Disabled
 0     Disabled        Disabled
 0     Disabled        Disabled
-----------------------------------------
 1     0x8100          0x8100
 1     0x9100          0x9100
 1     0x88A8          0x88A8
 1     Disabled        Disabled
 1     Disabled        Disabled
 1     Disabled        Disabled
 1     Disabled        Disabled
 1     Disabled        Disabled
-----------------------------------------
 8     0x8100          0x8100
 8     0x9100          0x9100
 8     0x88A8          0x88A8
 8     Disabled        Disabled
 8     Disabled        Disabled
 8     Disabled        Disabled
 8     Disabled        Disabled
 8     Disabled        Disabled
-----------------------------------------


● switch show acl vid-change
 Display changed VLAN.
ZXOS11NPI [/] # switch show acl vid-change
VID Change Before(ingress) rule info
---------------------------------------------------------
idx     port_map(0~8) in/outer VID(before)     VID(after)
---------------------------------------------------------
0      100000000       Outer    200            0
---------------------------------------------------------
rule count : 1


● switch show port vid-change
 Display changed VLAN.
ZXOS11NPI [/] # switch show port vid-change
VID Change After(egress) rule info
---------------------------------------------------------
idx     port_map(0~8) in/outer VID(before)     VID(after)
---------------------------------------------------------
 0       100000000       Outer 0               200
---------------------------------------------------------
rule count : 1




                                               84
XGSPON-STICK


● switch show port status
  Display port activation status.
  Port 0 is pon serdes, port 1 is ethernet serdes and port 8 is cpu side. (2~6 is not used)

ZXOS11NPI [/] # switch show port status
=================
PORT | PORT_STATE
-----+-----------
0    | Enable
1    | Enable
8    | Enable
=================

● switch show sfp
  Display gpio pin status.
ZXOS11NPI [/] # switch show sfp
===============SFP INFO===================
       MOD_ABS    | 0
       LOS        | 0
       TX_PWN     | 0
==========================================

● switch serdes info
  Display gpio pin status.
  If value is under 0x38(Bad), please replug optical line or reboot XGSPON.
ZXOS11NPI [/] # switch serdes info
==========================================
SWITCH ETH Serdes state
------------------------------------------
 serdes state | Very Good(0x3e)
==========================================

● mcast showg
  Display the group joined to the multicast.
ZXOS11NPI [/] # mcast showg
- igmp-state : enabled
- query-timeout : 260
- immediate_leave_ : 1
---------------------------------------------------------
- group : 239.1.1.1 static:0,staticport:0x0,rowkey:0x0
vid:3000 p:1 80:00:02:c0:f2:84 192.85.1.50

● mcast log [ en | dis ]
  You can see igmp-related packets coming into the CPU. You can turn on and off with En/dis
  ZXOS11NPI [/] # mcast log en
  _print_dsatag from :: EthcIgmpFrameHeaderCheck
  iport:1, nest_vid:0, tag1_info:4, tag2_info:0, vid0:3000, vid1:4095 prio0:0, pri1:0
  oport-mask:256, damc:1, cup_tag:0, eg_valn_tag:0, ip_mcast:0, portid:0, nrl:0, mgmt:0
  !! received-packet TAG_PACKET tpid:0x8100, vid:3000, cfi:0, priority:0
  Packet received : len:68
  EthcIgmpFrameProc called. type=23 igmplen=8
  _get_vid_from_tag called
  IgmpDsaTagFromCpu succ:1, sport:1, dport:0, o_tagged:tag, opri:0, ovid:3000
  _get_vid_from_tag IgmpDsaTagFromCpu vid:3000
  EthcIgmpGroupHostFind called. vid=3000 addr=239.1.1.1 smac=80:00:02:c0:f2:84
  EthcIgmpGroupHostFind exited. error 0 group 0x4092c760 host 0x4092c7d8 join 0x4092c850
  EthcIgmpGroupDelete    called.  vid   =3000   addr=239.1.1.1   sport=1  smac=80:00:02:c0:f2:84
  sip=192.85.1.50
  IgmpDsaTagFromCpu succ:1, sport:1, dport:0, o_tagged:tag, opri:0, ovid:3000
  IgmpFrameForward : len:72
  _print_dsatag from :: IgmpFrameForward
  iport:1, nest_vid:0, tag1_info:0, tag2_info:0, vid0:3000, vid1:0 prio0:0, pri1:0




                                               85
XGSPON-STICK

  oport-mask:1, damc:0, cup_tag:1, eg_valn_tag:0, ip_mcast:0, portid:0, nrl:0, mgmt:0

● mcast packetlog [ en | dis ]
  Display the packets coming into the CPU. You can turn on and off with En/dis.
  ZXOS11NPI [/] # mcast packetlog en
  packet Received <-- : len:68
  18000804 00bb8fff 01005e01 01018000 02c0f284 81000bb8 080046c0 0020b58f 00000102 bcfec055
  0132ef01 01019404 00001600 f9fcef01 01010000 00000000 00000000




15.3.5. OMCI Management
● showme
Display list of created ME instance.
The format of each entry is as follows.
<class_id> <ME-name> (#<instance_count>) <instance_id list … >
ZXOS11NPI [/] # showme
    2 ONU data (#1): 0000
    5 Cardholder (#2): 0180 0101
    6 Circuit pack (#2): 0180 0101
    7 Software image (#3): 0000 0001 ffff
    11 PPTP Etherent UNI (#1): 0101
    131 OLT-G (#1): 0000
    134 IP host config data (#1): 0000
    256 ONU-G (#1): 0000
    257 ONU2-G (#1): 0000
    441 ONU3-G (#1): 0000
    262 T-CONT (#8): 8000 8001 8002 8003 8004 8005 8006 8007
    263 ANI-G (#1): 0000
    264 UNI-G (#1): ffff
    277 Priority Queue (#73): 0000 0001 0002 0003 0004 0005 0006 0007 0070 8000 8001 8002 8003
8004 8005 8006
                            8007 8010 8011 8012 8013 8014 8015 8016 8017 8020 8021 8022 8023 8024
8025 8026
                            8027 8030 8031 8032 8033 8034 8035 8036 8037 8040 8041 8042 8043 8044
8045 8046
                            8047 8050 8051 8052 8053 8054 8055 8056 8057 8060 8061 8062 8063 8064
8065 8066
                            8067 8070 8071 8072 8073 8074 8075 8076 8077
    278 Traffic scheduler (#8): 8000 8001 8002 8003 8004 8005 8006 8007
    329 VEIP (#1): ff01
    332 Enhanced security control (#1): 0000
    336 ONU Dynamic Power Management Control (#1): 0000
    272 GAL Ethernet profile (#1): 0001
    268 GEM port network CTP (#5): fffe 044e fffd 044f 0450
    266 GEM IW TP (#4): 044e fffd 044f 0450
    281 Multicast GEM IW TP (#1): 0001
    46 MAC bridge configuration data (#1): 0101
    48 MAC bridge port designation data (#5): 0101 1102 110b 1103 1104
    49 MAC bridge port filter table data (#5): 0101 1102 110b 1103 1104
    79 MAC bridge port filter pre-assign table (#5): 0101 1102 110b 1103 1104
    50 MAC bridge port bridge table data (#5): 0101 1102 110b 1103 1104
    130 IEEE 802.1p mapper service profile (#3): 1102 1103 1104
    84 VLAN tagging filter data (#4): 1102 110b 1103 1104
    171 Extended VLAN tagging operation configuration data (#1): 0101
    309 Multicast operations profile (#1): 0101
    310 Multicast subscriber config info (#1): 0101
    311 Multicast subscriber monitor (#1): 0101
    47 MAC bridge port configuration data (#5): 0101 1102 110b 1103 1104
    45 MAC bridge service profile (#1): 0101
    287 Omci (#1): 0000
    440 Time Status Message (#1): 0000
    457 ONU Time Configuration (#1): 0000
    240 System Management (#1): 0000



                                               86
XGSPON-STICK

● showme class_id *
Shows all instances of ME corresponding to the specified class_id.
ZXOS11NPI [/] # showme 5 *
5 Cardholder instances#2:

5 Cardholder.0180:
    actualPluginUnitType: 238
    expectedPluginUnitType: 238
    expectedePortCount: 0
    expectedEquipmentId:
    actualEquipmentId:
    protectionProfilePointer: 0
    invokeProtectionSwitch: 0
    arc: 0
    arcInterval: 0

5 Cardholder.0101:
    actualPluginUnitType: 49
    expectedPluginUnitType: 49
    expectedePortCount: 0
    expectedEquipmentId:
    actualEquipmentId:
    protectionProfilePointer: 0
    invokeProtectionSwitch: 0
    arc: 0
    arcInterval: 0


showme class_id instance_id <max_depth>
Shows the attribute value of ME instance corresponding to the designated class_id and
instance_id.
When an instance has another instance pointer as an attribute, the information of the instance
corresponding to the connected instance pointer according to the max_depth value is displayed.
Same as 1 if max_depth is not specified
ZXOS11NPI [/] # showme 262 0x8000
262 T-CONT.8000:
    allocId: 0x045b(1115)
    policy: 1(strict)
    GEM ports#2
        GEM port network CTP.044e port id 0x044e
        GEM port network CTP.044f port id 0x044f
    Priority queues#8
        Priority Queue.8000 idx 9 GEM ports#0
        Priority Queue.8001 idx 10 GEM ports#0
        Priority Queue.8002 idx 11 GEM ports#0
        Priority Queue.8003 idx 12 GEM ports#0
        Priority Queue.8004 idx 13 GEM ports#0
        Priority Queue.8005 idx 14 GEM ports#0
        Priority Queue.8006 idx 15 GEM ports#1
        Priority Queue.8007 idx 16 GEM ports#1

ZXOS11NPI [/] # showme 262 0x8000 1
262 T-CONT.8000:
    allocId: 0x045b(1115)
    policy: 1(strict)
    GEM ports#2
        GEM port network CTP.044e port id 0x044e
        GEM port network CTP.044f port id 0x044f
    Priority queues#8
        Priority Queue.8000 idx 9 GEM ports#0
        Priority Queue.8001 idx 10 GEM ports#0
        Priority Queue.8002 idx 11 GEM ports#0
        Priority Queue.8003 idx 12 GEM ports#0
        Priority Queue.8004 idx 13 GEM ports#0
        Priority Queue.8005 idx 14 GEM ports#0
        Priority Queue.8006 idx 15 GEM ports#1




                                               87
XGSPON-STICK

       Priority Queue.8007 idx 16 GEM ports#1

ZXOS11NPI [/] # showme 262 0x8000 2
262 T-CONT.8000:
    allocId: 0x045b(1115)
    policy: 1(strict)
    GEM ports#2
        GEM port network CTP.044e port id 0x044e
        268 GEM port network CTP.044e:
            portID: 0x044e(1102)
            t-cont: T-CONT(262).8000
            direction: 3(us+ds)
            upstream priority queue(t-cont): Priority Queue(277).8006
            upstream traffic descriptor: 0x0000
            uniCounter: 0
            downstream priority queue: Priority Queue(277).0000
            encryptionState: 0(unencrypted)
            downstream traffic descriptor: 0x0000
            encryptionKeyRing: 0(no encryption)
        GEM port network CTP.044f port id 0x044f
        268 GEM port network CTP.044f:
            portID: 0x044f(1103)
            t-cont: T-CONT(262).8000
            direction: 3(us+ds)
            upstream priority queue(t-cont): Priority Queue(277).8007
            upstream traffic descriptor: 0x0000
            uniCounter: 0
            downstream priority queue: Priority Queue(277).0000
            encryptionState: 0(unencrypted)
            downstream traffic descriptor: 0x0000
            encryptionKeyRing: 0(no encryption)
    Priority queues#8
        Priority Queue.8000 idx 9 GEM ports#0
        277 Priority Queue.8000:
            queueConfigurationOption: 1(share)
            maximumQueueSize: 1048560 bytes (scale factor 48)
            allocatedQueueSize: 1048560 bytes (scale factor 48)
            discardBlkCntrRstInterval: 0 msec
            thrForDiscardedBlksBufOvf: 0 bytes
            relatedPort: T-CONT(262).8000 (priority 0)
            trafficSchedulerPointer: 0x0000
            weight: 0
            backPressureOperation: 0(enabled)
            backPressureTime: 0 usec
            backPressureOccurQThr: 0 bytes
            backPressureClearQThr: 0 bytes
            packetDropQueueThresholds: green [65520, 131088), yellow [32736, 65520) bytes
            packetDropMaxP: green %g, yellow %g
            queueDropWQ: %g
            dropPrecedenceClearMark: 0
        Priority Queue.8001 idx 10 GEM ports#0
        277 Priority Queue.8001:
            queueConfigurationOption: 1(share)
            maximumQueueSize: 1048560 bytes (scale factor 48)
            allocatedQueueSize: 1048560 bytes (scale factor 48)
            discardBlkCntrRstInterval: 0 msec
            thrForDiscardedBlksBufOvf: 0 bytes
            relatedPort: T-CONT(262).8000 (priority 1)
            trafficSchedulerPointer: 0x0000
            weight: 0
            backPressureOperation: 0(enabled)
            backPressureTime: 0 usec
            backPressureOccurQThr: 0 bytes
            backPressureClearQThr: 0 bytes
            packetDropQueueThresholds: green [65520, 131088), yellow [32736, 65520) bytes
            packetDropMaxP: green %g, yellow %g
            queueDropWQ: %g
            dropPrecedenceClearMark: 0




                                                88
XGSPON-STICK

           . . .


   Priority Queue.8007 idx 16 GEM ports#1
       277 Priority Queue.8007:
           queueConfigurationOption: 1(share)
           maximumQueueSize: 1048560 bytes (scale factor 48)
           allocatedQueueSize: 1048560 bytes (scale factor 48)
           discardBlkCntrRstInterval: 0 msec
           thrForDiscardedBlksBufOvf: 0 bytes
           relatedPort: T-CONT(262).8000 (priority 7)
           trafficSchedulerPointer: 0x0000
           weight: 0
           backPressureOperation: 0(enabled)
           backPressureTime: 0 usec
           backPressureOccurQThr: 0 bytes
           backPressureClearQThr: 0 bytes
           packetDropQueueThresholds: green [65520, 131088), yellow [32736, 65520) bytes
           packetDropMaxP: green %g, yellow %g
           queueDropWQ: %g
           dropPrecedenceClearMark: 0


omci setattr class_id instance_id attribute_idx attribute_value
attribute_idx : Attribute index in the designated ME
attribute_value : attribute value. format depends on specified attribute
ZXOS11NPI [/] # showme 256 0
256 ONU-G.0000:
    vendorId: ZRMT
    version: ZX300R03
    serial: 0x5a524d5467590044
    trafficManagementOption: 0
    deprecated: 0
    batteryBackup: 0
    administrativeState: 0
    operationalState: 1
    onuSurvivalTime: 0
    logicalOnuId:
    logicalPassword:
    credentialsStatus: 0
    extendedTcLayerOptions: 0x0000
ZXOS11NPI [/] # omci setattr 256 0 0 "ABCD"
write: ONU-G.0000.0(vendorId) 4 bytes
ZXOS11NPI [/] # showme 256 0
256 ONU-G.0000:
    vendorId: ABCD
    version: ZX300R03
    serial: 0x5a524d5467590044
    trafficManagementOption: 0
    deprecated: 0
    batteryBackup: 0
    administrativeState: 0
    operationalState: 1
    onuSurvivalTime: 0
    logicalOnuId:
    logicalPassword:
    credentialsStatus: 0
    extendedTcLayerOptions: 0x0000


alarm class_id instance_id alarm_idx          [1|0]
Generate or clear the specific alarm.
ZXOS11NPI [/] # alarm 256 0x0000 7 1
ONU-G.0000 alarm<7> set notified ok

ZXOS11NPI [/] # alarm 256 0x0000 7 0
ONU-G.0000 alarm<7> clear notified ok




                                                89
XGSPON-STICK


ZXOS11NPI [/] # zdump omci type 16
OMCI history (total #768 items):
message type to filter: 16(Alarm)
---------+-----------+-------+------+-----------------------------
 dump    |          |alarm |alarm |
 seq n |time(us) |bitmap |seq n | MEId (clss).instance_id
---------+-----------+-------+------+-----------------------------
[ 766] 2220776148 010000 01         ONU-G(0100).0000
[ 767] 2226486153 000000 02         ONU-G(0100).0000
matching message count: 2


arc   class_id instance_id arc arc_interval
arc : 1(enable), 0(disable)
arc_interval : 0~255 in minute
Disables or enables the ARC of the ME instance specified for only the minute specified by
arc_interval.
ZXOS11NPI [/] # arc 263 0 1 1
ANI-G.0000 enable arc (interval 1 min) applied
ZXOS11NPI [/] # arc 263 0 0 1
ANI-G.0000 disable arc (interval 1 min) applied




15.3.6. Laser Driver IC Management
● sfp info
Display information of SFP (temperature, supply voltage, tx bias current, tx output power, rx
optical power).
ZXOS11NPI [/] # sfp info
diagnostic monitoring type: 0x68
       internally calibrated
temperature: 40.500C
supply voltage: 3.265V
tx bias current: 11.584mA
tx output power: 4.198mW (6.230dBm)
rx optical power: 0.011mW (-19.626dBm) [average]


● sfp dump < table_id >
Display SFP page information. If you want to change the table of A2 page and display it, enter
the table_id. table_id is 0, 2, 3 or 4.
ZXOS11NPI [/] # sfp dump
Page@0xa0
   00000000 03 04 01 20 00 00 00 00   00 00 00 06 41 00 00 00   .. ........A...
   00000010 00 00 00 00 52 60 50 32   09 00 00 20 00 00 00 00   ...R`P2... ....
   00000020 20 20 20 20 00 00 03 24   12 14 48 05 40 40 10 40      ...$..H.@@.@
   00000030 0c 48 05 52 50 48 00 03   31 02 20 20 04 04 00 28   H.RPH..1. ...(
   00000040 00 10 00 00 00 12 30 10   30 20 02 10 20 20 30 30   .....0.0 .. 00
   00000050 32 20 00 00 02 20 00 30   20 23 00 00 00 c0 00 86    ... .0 #......
   00000060 86 48 5d 9e a8 17 a1 c3   36 0c a4 9b 0b 81 be 09   H].....6.......
   00000070 3d d1 5f 3c 87 0e 7a a1   fd d7 ea 6b 5b 35 89 00   ._<..z....k[5..
   00000080 00 ca 66 ad 4d 8d 08 61   be 6f ba c8 e1 85 a8 67   .f.M..a.o.....g
   00000090 db ff bc f5 fa 86 4e 46   9d 05 3a 55 3a 92 0f 58   .....NF..:U:..X
   000000a0 fc 61 61 be 92 f3 9b e7   62 af bc d5 8d 8e 0e 1f   aa.....b.......
   000000b0 7b c9 55 86 a2 3b b8 64   9e 2a fb 73 1c 2c ab b0   .U..;.d.*.s.,..
   000000c0 75 5f 7d 31 4a cb da 28   e1 cd ad 73 7d 1d b5 57   _}1J..(...s}..W
   000000d0 f3 bf 4e d0 77 59 55 17   9a 9e 2b f4 d2 51 88 94   .N.wYU...+..Q..
   000000e0 b0 bb 77 b6 45 0c 11 78   4f f8 3a d6 89 40 40 16   .w.E..xO.:..@@.
   000000f0 99 89 b3 67 57 34 46 ac   2f b9 e0 9b 57 00 20 6a   ..gW4F./...W. j
Page@0xa2




                                                  90
XGSPON-STICK

  00000000   00 00 10 10 22 20 20 00   00 04 45 51 44 20 05 42   ..." ...EQD .B
  00000010   00 80 81 80 0a 2a 80 0a   00 00 00 00 00 82 49 00   ....*........I.
  00000020   00 00 00 00 00 00 00 00   00 00 00 00 00 00 00 00   ...............
  00000030   00 00 00 00 00 00 00 00   00 00 00 00 00 00 00 00   ...............
  00000040   00 00 00 00 13 80 00 00   00 00 00 00 00 00 00 00   ...............
  00000050   01 00 00 00 01 00 00 00   01 00 00 00 00 00 00 10   ...............
  00000060   00 00 58 01 90 80 00 00   00 00 09 64 24 10 00 00   .X........d$...
  00000070   a8 00 00 00 04 40 00 00   00 00 00 00 00 00 00 82   ....@..........
  00000080   00 00 15 60 78 00 00 02   00 00 40 70 40 40 80 20   ..`x.....@p@@.
  00000090   54 08 20 00 00 98 a0 00   10 00 00 01 00 00 08 04   . .............
  000000a0   20 05 00 00 00 00 02 00   00 12 00 00 30 00 00 00   ...........0...
  000000b0   00 00 00 00 00 00 00 00   01 00 00 40 00 00 41 00   ..........@..A.
  000000c0   00 00 00 00 00 00 00 00   00 00 00 00 00 00 00 00   ...............
  000000d0   00 00 00 00 00 00 00 00   00 00 00 00 00 00 00 00   ...............
  000000e0   00 00 00 00 00 00 00 00   00 00 00 00 00 00 00 00   ...............
  000000f0   00 00 00 00 00 00 00 00   00 00 00 00 00 00 00 00   ...............



ZXOS11NPI [/] # sfp dump 2
Page@0xa0
   00000000 03 04 01 20 00 00 00 00    00 00 00 06 41 00 00 00   .. ........A...
   00000010 00 00 00 00 52 60 50 32    09 00 00 20 00 00 00 00   ...R`P2... ....
   00000020 20 20 20 20 00 00 03 24    12 14 48 05 40 40 10 40      ...$..H.@@.@
   00000030 0c 48 05 52 50 48 00 03    31 02 20 20 04 04 00 28   H.RPH..1. ...(
   00000040 00 10 00 00 00 12 30 10    30 20 02 10 20 20 30 30   .....0.0 .. 00
   00000050 32 20 00 00 02 20 00 30    20 23 00 00 00 c0 00 86    ... .0 #......
   00000060 86 48 5d 9e a8 17 a1 c3    36 0c a4 9b 0b 81 be 09   H].....6.......
   00000070 3d d1 5f 3c 87 0e 7a a1    fd d7 ea 6b 5b 35 89 00   ._<..z....k[5..
   00000080 00 ca 66 ad 4d 8d 08 61    be 6f ba c8 e1 85 a8 67   .f.M..a.o.....g
   00000090 db ff bc f5 fa 86 4e 46    9d 05 3a 55 3a 92 0f 58   .....NF..:U:..X
   000000a0 fc 61 61 be 92 f3 9b e7    62 af bc d5 8d 8e 0e 1f   aa.....b.......
   000000b0 7b c9 55 86 a2 3b b8 64    9e 2a fb 73 1c 2c ab b0   .U..;.d.*.s.,..
   000000c0 75 5f 7d 31 4a cb da 28    e1 cd ad 73 7d 1d b5 57   _}1J..(...s}..W
   000000d0 f3 bf 4e d0 77 59 55 17    9a 9e 2b f4 d2 51 88 94   .N.wYU...+..Q..
   000000e0 b0 bb 77 b6 45 0c 11 78    4f f8 3a d6 89 40 40 16   .w.E..xO.:..@@.
   000000f0 99 89 b3 67 57 34 46 ac    2f b9 e0 9b 57 00 20 6a   ..gW4F./...W. j
Page@0xa2
   00000000 00 00 10 10 22 20 20 00    00 04 45 51 44 20 05 42   ..." ...EQD .B
   00000010 00 80 81 80 0a 2a 80 0a    00 00 00 00 00 82 49 00   ....*........I.
   00000020 00 00 00 00 00 00 00 00    00 00 00 00 00 00 00 00   ...............
   00000030 00 00 00 00 00 00 00 00    00 00 00 00 00 00 00 00   ...............
   00000040 00 00 00 00 13 80 00 00    00 00 00 00 00 00 00 00   ...............
   00000050 01 00 00 00 01 00 00 00    01 00 00 00 00 00 00 10   ...............
   00000060 00 00 58 01 90 80 00 00    00 00 09 64 24 10 00 00   .X........d$...
   00000070 a8 00 00 00 04 40 00 00    00 00 00 00 00 00 00 80   ....@..........
   00000080 e1 1e 00 00 90 02 18 00    10 1f 00 01 5e 0a 4e 00   ...........^.N.
   00000090 00 00 00 00 1a aa 06 14    bf 70 aa 18 10 58 02 d0   ........p...X..
   000000a0 06 06 01 00 00 18 1a 6d    c9 20 20 35 3a 12 00 00   ......m. 5:...
   000000b0 00 80 00 00 50 00 7e 62    68 7f 7f 54 aa 44 40 40   ...P.~bh..T.D@@
   000000c0 28 83 00 00 00 00 ff ff    00 41 10 00 50 40 3b 00   ........A..P@;.
   000000d0 ff ff ff f0 00 7f 81 50    20 78 64 01 00 00 00 00   ......P xd.....
   000000e0 00 00 00 00 00 00 00 00    00 00 00 00 00 00 00 00   ...............
   000000f0 01 00 00 00 00 00 00 00    00 00 00 00 00 00 00 00   ...............


● sfp sn
Display serial number of Laser driver.
ZXOS11NPI [/] # sfp sn

vendor sn read success

Vendor SN : "OB181910210009 "


● sfp rd page table_id offset length
Read Laser driver IC.
page : 0 or 1 (page A0 or A2)



                                                91
XGSPON-STICK

table_id : 0, 2, 3, 4 or (0, 0x80, 0x81, 0x82)
offset : 0x00 ~ 0xff
length : 0x01 ~ 0xff (offset +length ≤ 0x100)

Example. Read page(1), table_id(0x80), offset(0x80), length(0x10)
ZXOS11NPI [/] # sfp rd 1 0x80 0x80 0x10
Page1 Table128 0x80, 16 bytes:
   00000080 d7 1e 00 00 90 02 18 00 10 1f 00 01 5e 0a 4e 00        ...........^.N.


● sfp wr page table_id offset length da
Write Laser driver IC.

Example. Write page(1), table_id(0x80), offset(0x88), length(1), data(0x10)
ZXOS11NPI [/] # sfp wr 1 0x80 0x88 1 0x10
  00000088 10                                                .
Verifying page1 table128, 0x88, 0x01:
  00000088 10                                                .


● tx_state <0|1>
Enable/disable optical Tx.

0: disable
1: enable


15.3.7. Troubleshooting Management
● log show dbg_level
Display debugging level of the each modules.
ZXOS11NPI [/] # log show dbg_level
------------------------------------------------------
level : 0(OFF), 1(FTL), 2(ERR), 3(WRN), 4(INF), 5(VRB)
  OMCI : 5
  PON : 3
  ETH : 3
  SFP : 5
  PTP : 5
  SYNCE : 5
  ONU : 3
  LOGIN : 3
------------------------------------------------------


● log set dbg_level [dbg_level] [module …|all]
[dbg_level] : debugging level
[module] : module to be applied. if insert ‘all’, it applies to all modules.
Configure debugging level of the module.
ZXOS11NPI [/] # log set dbg_level 3 PON ETH
MODULE(ETH) => dbg level (3)
MODULE(PON) => dbg level (3)
ZXOS11NPI [/] # log show dbg_level
------------------------------------------------------
level : 0(OFF), 1(FTL), 2(ERR), 3(WRN), 4(INF), 5(VRB)
  OMCI : 5
  PON : 3
  ETH : 3
  SFP : 5
  PTP : 5
  SYNCE : 5
  ONU : 3



                                                  92
XGSPON-STICK

  LOGIN : 3
------------------------------------------------------

ZXOS11NPI [/] # log set dbg_level 2 all
------------------------------------------------------
level : 0(OFF), 1(FTL), 2(ERR), 3(WRN), 4(INF), 5(VRB)
  OMCI : 2
  PON : 2
  ETH : 2
  SFP : 2
  PTP : 2
  SYNCE : 2
  ONU : 2
  LOGIN : 2
------------------------------------------------------\


● log save dbg_level <factory>
save all debugging level of modules.
ZXOS11NPI [/] # log show dbg_level
------------------------------------------------------
level : 0(OFF), 1(EMR), 2(ERR), 3(WRN), 4(INF), 5(PRN)
  OMCI : 2
  PON : 2
  ETH : 2
  SFP : 2
  PTP : 2
  SYNCE : 2
  ONU : 2
  LOGIN : 2
------------------------------------------------------

ZXOS11NPI [/] # log save dbg_level
OMCI:(2) PON:(2) ETH:(2) SFP:(2) PTP:(2) SYNCE:(2)
config-save offset: 0x00040000(23989)
done (675935 usec).
config-save offset: 0x00050000(23990)
done (677366 usec).


ZXOS11NPI [/] # getenv mod_dbg_lvl
OMCI(level=2) PON(level=2) ETH(level=2) SFP(level=2) PTP(level=2) SYNCE(level=2)


factory reset debug level and save them to flash.
ZXOS11NPI [/] # log save dbg_level factory
OMCI:(2) PON:(2) ETH:(2) SFP:(2) PTP:(2) SYNCE:(2)
config-save offset: 0x00040000(23989)
done (675935 usec).
config-save offset: 0x00050000(23990)
done (677366 usec).


● log show mod [module …] <flash>
<module> : module to be applied
flash : (optional) show log from flash, if not entered it is taken from RAM filesystem.

Display log of the specific modules
ZXOS11NPI [/] # log show mod PON
file : /mnt/log_0.txt
00:03:57.192380 [PON] pon_deactivate(10) !!
00:03:57.897428 [PON] pon_deactivate(3) !!


ZXOS11NPI [/] # log show mod OMCI
file : /mnt/log_0.txt
00:00:04.510154 [OMCI] sfp state changed to on(1).




                                                93
XGSPON-STICK



● log show line [begin #|end #|all] <flash>
begin # : The number of lines to be output from the beginning of the file.
end # : The number of lines to be output from the end of the file
flash : (optional) show log from flash, if not entered it is taken from RAM filesystem.

ZXOS11NPI [/] # log show line all
file : /mnt/log_0.txt
00:00:04.510154 [OMCI] sfp state changed to on(1).
00:00:04.930275 [PON] sync 0x0000, ploam 0x0101, onlines#0
00:00:05.109805 [PON] sync 0x0001, ploam 0x0101, onlines#0
00:00:05.128265 [PON] sync 0x0002, ploam 0x0102, onlines#0
00:00:11.139073 [PON] sync 0x0002, ploam 0x0200, onlines#0
00:00:11.249278 [PON] sync 0x0002, ploam 0x0400, onlines#0
00:00:11.605172 [PON] sync 0x0002, ploam 0x0500, onlines#1
00:00:11.623762 [PON] key index 1, state 0x0002, key 3e56841a 000e7f55 52d50d32 bc3a68fd
00:00:11.651041 [PON] key index 1, state 0x0002, key 3e56841a 000e7f55 52d50d32 bc3a68fd
00:00:11.678095 [PON] key index 1, state 0x0003, key 3e56841a 000e7f55 52d50d32 bc3a68fd
00:00:11.705131 [PON] key index 1, state 0x0004, key 3e56841a 000e7f55 52d50d32 bc3a68fd
00:50:23.661341 [PON] key index 2, state 0x0002, key 9e283152 6cf29ddd 590810ea ed7b4505
00:50:23.687786 [PON] key index 2, state 0x0002, key 9e283152 6cf29ddd 590810ea ed7b4505
00:50:23.714199 [PON] key index 2, state 0x0003, key 9e283152 6cf29ddd 590810ea ed7b4505
00:50:23.740708 [PON] key index 2, state 0x0004, key 9e283152 6cf29ddd 590810ea ed7b4505



ZXOS11NPI [/] # log show line end 3
file : /mnt/log_0.txt
00:50:23.687786 [PON] key index 2, state 0x0002, key 9e283152 6cf29ddd 590810ea ed7b4505
00:50:23.714199 [PON] key index 2, state 0x0003, key 9e283152 6cf29ddd 590810ea ed7b4505
00:50:23.740708 [PON] key index 2, state 0x0004, key 9e283152 6cf29ddd 590810ea ed7b4505


ZXOS11NPI [/] # log show line begin 4
file : /mnt/log_0.txt
00:00:04.510154 [OMCI] sfp state changed to on(1).
00:00:04.930275 [PON] sync 0x0000, ploam 0x0101, onlines#0
00:00:05.109805 [PON] sync 0x0001, ploam 0x0101, onlines#0
00:00:05.128265 [PON] sync 0x0002, ploam 0x0102, onlines#0


ZXOS11NPI [/] # log show line begin 2 flash
file : /mnt/log_0.txt
00:03:57.192380 [PON] pon_deactivate(10) !!
00:03:57.897428 [PON] pon_deactivate(3) !!


ZXOS11NPI [/] # log show line end 2 flash 1
file : /mnt/log_1.txt
00:01:04.930275 [PON] sync 0x0000, ploam 0x0101, onlines#0
00:01:05.109805 [PON] sync 0x0001, ploam 0x0101, onlines#1



● sysmon mdsync
shows the current mib data sync counter.

ZXOS11NPI [/] # sysmon mdsync
 mibDataSync : 67


● sysmon cpu
shows the current cpu usage as a percentage.



                                                94
XGSPON-STICK



ZXOS11NPI [/] # sysmon cpu
 CPU usage
cpu usage : 6.702 %


● sysmon process
shows the current status of each task.

ZXOS11NPI [/] # sysmon process
Process status
--------------------
 Task ID | status
-----------+--------
0x0a010003 TIME
0x0a010004 EV
0x0a010005 TIME
0x0a010006 EV
0x0a010007 EV
0x0a010008 TIME
0x0a010009 TIME
0x0a01000a TIME
0x0a01000b SYSEV
0x0a01000c SYSEV
0x0a01000d SYSEV
0x0a01000e SYSEV
0x0a01000f READY
0x0b010001 CV
0x0b010004 CV
0x0b010005 CV
0x0b010006 SEM
0x0b010007 SEM
0x0b010008 CV
0x0b010009 CV
MTX(Mutex), SEM(Semaphore), EV(Event)
SYSEV(system Event), MSG(Message)
CV(Conditional Variable), SIG(Signal)


● sysmon memory
shows the current memory usage as a percentage.

ZXOS11NPI [/] # sysmon memory
Memory usage
used/total = 7761424/30318736 (25.599432 %)




15.3.8. test
● test <tod|pps|dying-gasp-alarm> enable

ToD / 1PPS / Dying Gasp function is disabled because it is not an sfp+ spec pin.
Temporarily enable tod/pps/dying-gasp-alarm for test


● test rogue-onu <mode 1|forced_on>

Rogue onu is forcibly generated for test purposes. There are only two types of rogue_onu mode:
1 (rogue_onu detect enable) and 32768 (rogue onu occurred).



                                               95
XGSPON-STICK


For details, see the description of "rugue_onu [mode1/forced_on]" in the Remote debug
Command list section.



15.3.9. DEBUG trace
● ssh trace packet (toggle)
Enable / disable ssh packet log
ZXOS11NPI [/] # ssh trace packet
trace.packet = 1
ZXOS11NPI [/] # ssh trace packet
trace.packet = 0


● ssh uni [enable/disable]
ZXOS11NPI [/] # ssh uni enable
00:40:53.811251 [ETH] ACL Add Success: -6
SSH UNI Enable(ACL:112)
ZXOS11NPI [/] # ssh uni disable
SSH UNI Disable(ACL:112)



● console en
Enable console output



● cfm show <md|ma|stack|state|lm-counter>
Show <md|ma|stack|state> list or lm-counter.
ZXOS11NPI [/] # cfm show stack
CFM Stack
*uniq-id: ONU internal unique MP ID
==================================================================================
 uniq |       |     |    |mep |mep |      |mp      | y1731pm responder enable
 id |port:vid|md id|ma id|MEid |id |level|type       | lm | dm | slm
------+--------+-----+-----+-----+-----+-----+--------+--------+--------+---------
   32h 1:715 0008h 0004h 0002h 312       5 Dn MEP enabled enabled enabled
==================================================================================


● cfm trace <all|frame|stack|mp|cci|ccr|lb|lt>
Show <all|frame|stack|mp|cci|ccr|lb|lt> packet message. these are toggle.
ZXOS11NPI [/] # cfm trace ccr
trace ccr=1
ZXOS11NPI [/] # __MEPprocessEqualCCM:
MEP(2h) <CCM: frame_len=109>
   00000000 08 00 08 04 7c 25 df ff 01 80 c2 00 00 37 00 00 ...|%.......7..
   00000010 64 01 01 02 81 00 02 5d 89 02 e0 01 04 46 00 00 ......].....F..
   00000020 08 0b 00 71 04 06 6b 61 6e 67 6e 72 02 05 4d 41 ..q..kangnr..MA
   00000030 31 31 30 00 00 00 00 00 00 00 00 00 00 00 00 00 10.............
   00000040 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ...............
   00000050 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ...............
   00000060 00 00 00 00 02 00 01 02 04 00 01 01 00         .............
ZXOS11NPI [/] # cfm trace ccr
trace ccr=0


● cfm mep <MEid> ais-state
Shows the ais state of mep corresponding to <MEid>. <MEid> is the Dot1agMEP ME instance id,



                                               96
XGSPON-STICK

not MEPID. To delete statistics counters, use cfm mep <MEid> ais-clear-counter.
ZXOS11NPI [/] # cfm mep 1 ais-state
AIS
 AISenabled : enabled
 AISR_state : reset (begin, reset, defect, defect_soak,         report_defect,   defect_reported,
defect_clearing)
 AISI_state : idle (begin, idle, waiting)
 defect_condition :
   no defect condition
 reportedAlarmBitMap : 0x0000
 ais_period : 0 (0:once per second, 1:once per minute)
 ais_pbit_priority : 7
 ais_client_level : 0
 statistics
   ais_pon_rx_count : 0
   ais_uni_rx_count : 0
   ais_pon_tx_count : 0
   ais_uni_tx_count : 0


● cfm log <(minus)index>
Shows the last (index) packet log transmitted/received. Only the first 64 bytes of the frame are
saved, and up to 64 entries are saved. If it exceeds 64, the old log is overwritten by the new
packet log.
ZXOS11NPI [/] # cfm log -1
[3] 0:00:47.970314 Tx -> PON vid=2501 priority=7 frame_len=101
   00000000 01 80 c2 00 00 37 00 0b 6f aa 00 02 81 00 e9 c5 ....7..o.......
   00000010 89 02 e0 01 05 46 00 00 00 03 00 0b 04 06 4d 44 ....F........MD
   00000020 31 30 30 37 02 07 4d 41 31 30 30 37 31 00 00 00 007..MA10071...
   00000030 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 ...............




15.3.10. Packet Capture
● capture start
Start packet capture
ZXOS11NPI [/] # capture start
! Capturing ethernet packets has been started.

● capture stop
Stop packet capture
ZXOS11NPI [/] # capture start
! Capturing ethernet packets has been stopped.


● capture show [detail]
Show captured packet
ZXOS11NPI [/] # capture show
Total captured packets: 1
[        0]    2:31:22.663336 RX<-PON len=76         DA/SA=01:00:5e:00:00:01  3c:8b:cd:f0:5e:39
tag=outer{p7:606 }               etype=0800h(IPv4), protocol=02h(IGMP)
ZXOS11NPI [/] # capture show detail
Total captured packets: 1
[     0] 2:31:22.663336 RX<-PON len=76     cpu_tag={08 10 08 04 00 25 e0 00} tag=outer{p7:606 }
etype=0800h(IPv4), protocol=02h(IGMP)
   00000000 01 00 5e 00 00 01 3c 8b cd f0 5e 39 81 00 e2 5e ..^...<...^9...^
   00000010 08 00 46 c0 00 20 00 00 00 00 01 02 44 17 00 00 ..F.. ......D...
   00000020 00 00 e0 00 00 01 94 04 00 00 11 64 ee 9b 00 00 ...........d....
   00000030 00 00 00 00 00 00 00 00




                                                 97
XGSPON-STICK

● capture filter etype 0x[HEX_NUM] proto [DEC_NUM]
Set capture packet’s filter configure.
ZXOS11NPI [/] # capture filter etype 0x0800 proto 2
Capture filter ethertype : 0x800
Capture filter ip_protocol: 2


● capture filter txport uni
Set capture packet’s filter configure.
ZXOS11NPI [/] # capture filter etype 0x0800 proto 2
Capture filter txport uni


● capture filter mactype ucast
Set capture packet’s filter configure.
ZXOS11NPI [/] # capture filter mactype ucast

● capture filter macaddr 00:11:22:33:44:55
Set capture packet’s filter configure.
ZXOS11NPI [/] # capture filter macaddr 00:11:22:33:44:55
Capture filter MAC Address : 00:11:22:33:44:55

● capture filter [reset]
Show capture packet’s filtering info. Reset filter info
ZXOS11NPI [/] # capture filter
[Filter List]
----------------------
Ethernet Type : 0800h(2048)
    IP Protocol: 2
    OpCode     : SHOW_ALL
TX_Port        : UNI
VLAN ID        : SHOW_ALL
Dst MAC Type : Unicast
MAC Address    : 00:11:22:33:44:55

ZXOS11NPI [/] # capture filter reset
Capture filter has been reset.


● capture exclude [ssh|telnet|arp]
Not save specific packet types in logs.
ZXOS11NPI [/] # capture exclude ssh
exclude set ssh.


● capture exclude [reset]
Show current exclusion status. Reset exclusion settings.
ZXOS11NPI [/] # capture exclude
ARP : OFF
SSH : ON
TELNET: OFF

ZXOS11NPI [/] # capture exclude reset
Capture exclude has been reset.




                                                  98
XGSPON-STICK




                        Ordering
                     Information


               Zaram P/N

               ZXOS11□□□
                                C: Commercial
                                I: Industrial
                                N: None
                                P: IEEE 1588v2
                                N: None
                                E: SyncE




                           99
XGSPON-STICK




               ZXOS11NPI
               XGSPON-STICK
               Product Specification
               & Installation/Trouble Shotting Guide
               2020 Zaram Technology, Inc.
               All right reserved.




               Copyright of this manual is owned by Zaram Technology, Inc.
               This manual may not be reproduced, distributed, or modified
               in any form without written permission from Zaram
               Technology, Inc.




                             100
